<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Inference Engine (Clocher): engine/src/io/tensor_map.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Inference Engine (Clocher)<span id="projectnumber">&#160;0.2</span>
   </div>
   <div id="projectbrief">C11 CPU/GPU inference baseline with strict metrics &amp; harness</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('tensor__map_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">tensor_map.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="tensor__map_8h_source.html">tensor_map.h</a>&quot;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tensor_map.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c__incl.svg" width="630" height="198"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="tensor__map_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtm__sort__ref__s.html">tm_sort_ref_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3024ccd4a9af5109d24e6c57565d74a1" id="r_a3024ccd4a9af5109d24e6c57565d74a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a3024ccd4a9af5109d24e6c57565d74a1">_POSIX_C_SOURCE</a>&#160;&#160;&#160;200809L</td></tr>
<tr class="separator:a3024ccd4a9af5109d24e6c57565d74a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a9e71207990621a1e9a86b6c61a93fbbc" id="r_a9e71207990621a1e9a86b6c61a93fbbc"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtm__sort__ref__s.html">tm_sort_ref_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a9e71207990621a1e9a86b6c61a93fbbc">tm_sort_ref_t</a></td></tr>
<tr class="separator:a9e71207990621a1e9a86b6c61a93fbbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae19e0ad12742fe7fdff22f60436aadc7" id="r_ae19e0ad12742fe7fdff22f60436aadc7"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a> (const char *p)</td></tr>
<tr class="memdesc:ae19e0ad12742fe7fdff22f60436aadc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skip ASCII whitespace in a JSON string.  <br /></td></tr>
<tr class="separator:ae19e0ad12742fe7fdff22f60436aadc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ab7221db47755779150a9cc3c374b8f" id="r_a9ab7221db47755779150a9cc3c374b8f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a9ab7221db47755779150a9cc3c374b8f">read_file</a> (const char *path, char **out)</td></tr>
<tr class="memdesc:a9ab7221db47755779150a9cc3c374b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an entire file into a NUL-terminated buffer.  <br /></td></tr>
<tr class="separator:a9ab7221db47755779150a9cc3c374b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dae92b1c084251e956a5773e53869b5" id="r_a3dae92b1c084251e956a5773e53869b5"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a> (const char *p, char **out)</td></tr>
<tr class="memdesc:a3dae92b1c084251e956a5773e53869b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a JSON string literal (minimal escape handling).  <br /></td></tr>
<tr class="separator:a3dae92b1c084251e956a5773e53869b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a532a65d5913530d35874854778a4b444" id="r_a532a65d5913530d35874854778a4b444"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a532a65d5913530d35874854778a4b444">parse_u64</a> (const char *p, uint64_t *out)</td></tr>
<tr class="memdesc:a532a65d5913530d35874854778a4b444"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse an unsigned decimal integer.  <br /></td></tr>
<tr class="separator:a532a65d5913530d35874854778a4b444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a751de8ccde16854a65c185afdfecfdbf" id="r_a751de8ccde16854a65c185afdfecfdbf"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a> (const char *p)</td></tr>
<tr class="memdesc:a751de8ccde16854a65c185afdfecfdbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skip any JSON value (string/object/array/number/true/false/null).  <br /></td></tr>
<tr class="separator:a751de8ccde16854a65c185afdfecfdbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c69aef66f60185ab7bfe466d7eb1d3" id="r_a86c69aef66f60185ab7bfe466d7eb1d3"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a86c69aef66f60185ab7bfe466d7eb1d3">skip_array</a> (const char *p)</td></tr>
<tr class="memdesc:a86c69aef66f60185ab7bfe466d7eb1d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skip a JSON array value.  <br /></td></tr>
<tr class="separator:a86c69aef66f60185ab7bfe466d7eb1d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5190012370782147588f3b3b6a4886" id="r_a9e5190012370782147588f3b3b6a4886"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a9e5190012370782147588f3b3b6a4886">skip_object</a> (const char *p)</td></tr>
<tr class="memdesc:a9e5190012370782147588f3b3b6a4886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skip a JSON object value.  <br /></td></tr>
<tr class="separator:a9e5190012370782147588f3b3b6a4886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16fd8cdfb13d3c08166460f7c2e6d7b2" id="r_a16fd8cdfb13d3c08166460f7c2e6d7b2"><td class="memItemLeft" align="right" valign="top">static unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a16fd8cdfb13d3c08166460f7c2e6d7b2">ie_tolower_ascii</a> (unsigned char c)</td></tr>
<tr class="memdesc:a16fd8cdfb13d3c08166460f7c2e6d7b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lowercase ASCII character without locale effects.  <br /></td></tr>
<tr class="separator:a16fd8cdfb13d3c08166460f7c2e6d7b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935215259f1e01927022c50c39b8f197" id="r_a935215259f1e01927022c50c39b8f197"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a> (const char *a, const char *b)</td></tr>
<tr class="memdesc:a935215259f1e01927022c50c39b8f197"><td class="mdescLeft">&#160;</td><td class="mdescRight">Case-insensitive ASCII equality for short identifiers.  <br /></td></tr>
<tr class="separator:a935215259f1e01927022c50c39b8f197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86b10318f8d32a99fd516d382b211913" id="r_a86b10318f8d32a99fd516d382b211913"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="tensor__map_8h.html#ac1e5d7196426dbb29e3f26f38f4cde89">tensor_dtype_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a86b10318f8d32a99fd516d382b211913">parse_dtype</a> (const char *s)</td></tr>
<tr class="memdesc:a86b10318f8d32a99fd516d382b211913"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse dtype string into tensor_dtype_t.  <br /></td></tr>
<tr class="separator:a86b10318f8d32a99fd516d382b211913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce6e7f7fc0bc9c46436c0d41c8a72ae" id="r_abce6e7f7fc0bc9c46436c0d41c8a72ae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#abce6e7f7fc0bc9c46436c0d41c8a72ae">tensor_desc_zero</a> (<a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *td)</td></tr>
<tr class="memdesc:abce6e7f7fc0bc9c46436c0d41c8a72ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zero-initialize a tensor descriptor.  <br /></td></tr>
<tr class="separator:abce6e7f7fc0bc9c46436c0d41c8a72ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6b53de7ce006a1a2877e2b19ad8ce24" id="r_aa6b53de7ce006a1a2877e2b19ad8ce24"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a> (<a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *td)</td></tr>
<tr class="memdesc:aa6b53de7ce006a1a2877e2b19ad8ce24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free owned fields of a tensor descriptor and reset it.  <br /></td></tr>
<tr class="separator:aa6b53de7ce006a1a2877e2b19ad8ce24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87fc763c39a4a64f091406e88b1c640e" id="r_a87fc763c39a4a64f091406e88b1c640e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a87fc763c39a4a64f091406e88b1c640e">push_tensor</a> (<a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> **arr, uint32_t *count, uint32_t *cap, const <a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *src)</td></tr>
<tr class="memdesc:a87fc763c39a4a64f091406e88b1c640e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a tensor descriptor to a growable array.  <br /></td></tr>
<tr class="separator:a87fc763c39a4a64f091406e88b1c640e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a018b3eeeb442114239c9d39d309af8d0" id="r_a018b3eeeb442114239c9d39d309af8d0"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a018b3eeeb442114239c9d39d309af8d0">parse_shape_array</a> (const char *p, uint32_t **out_shape, uint32_t *out_ndim)</td></tr>
<tr class="memdesc:a018b3eeeb442114239c9d39d309af8d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a JSON array of integers into a shape array.  <br /></td></tr>
<tr class="separator:a018b3eeeb442114239c9d39d309af8d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a180580870bc40b8b36b78f81a1c26178" id="r_a180580870bc40b8b36b78f81a1c26178"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a180580870bc40b8b36b78f81a1c26178">parse_tensor_object</a> (const char *p, const char *map_style_name, <a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *td, int *out_ok)</td></tr>
<tr class="memdesc:a180580870bc40b8b36b78f81a1c26178"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a tensor descriptor object.  <br /></td></tr>
<tr class="separator:a180580870bc40b8b36b78f81a1c26178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b913e2710929070b5b073b4b67b24c" id="r_ac4b913e2710929070b5b073b4b67b24c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#ac4b913e2710929070b5b073b4b67b24c">tensor_map_load</a> (const char *path, <a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *out)</td></tr>
<tr class="memdesc:ac4b913e2710929070b5b073b4b67b24c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load tensor_map.json from disk.  <br /></td></tr>
<tr class="separator:ac4b913e2710929070b5b073b4b67b24c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42d154b3f93b07c41b514e468a61c803" id="r_a42d154b3f93b07c41b514e468a61c803"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a42d154b3f93b07c41b514e468a61c803">tensor_map_free</a> (<a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *map)</td></tr>
<tr class="memdesc:a42d154b3f93b07c41b514e468a61c803"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free tensor map and all owned memory.  <br /></td></tr>
<tr class="separator:a42d154b3f93b07c41b514e468a61c803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe58b80593931ffe5844ee4bcee805c5" id="r_abe58b80593931ffe5844ee4bcee805c5"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#abe58b80593931ffe5844ee4bcee805c5">tensor_map_find</a> (const <a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *map, const char *name)</td></tr>
<tr class="memdesc:abe58b80593931ffe5844ee4bcee805c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a tensor descriptor by exact name.  <br /></td></tr>
<tr class="separator:abe58b80593931ffe5844ee4bcee805c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dc54e5679c0402d5d812603754287a8" id="r_a9dc54e5679c0402d5d812603754287a8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a9dc54e5679c0402d5d812603754287a8">tm_sort_ref_cmp</a> (const void *a, const void *b)</td></tr>
<tr class="separator:a9dc54e5679c0402d5d812603754287a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545cca475e7c6de327d07da7515a67d1" id="r_a545cca475e7c6de327d07da7515a67d1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a> (char *err, size_t errsz, const char *msg)</td></tr>
<tr class="separator:a545cca475e7c6de327d07da7515a67d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5a6d86e99a96405eb2d6daf95603691" id="r_ad5a6d86e99a96405eb2d6daf95603691"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tensor__map_8c.html#ad5a6d86e99a96405eb2d6daf95603691">tensor_map_validate_against_bin</a> (const <a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *map, size_t bin_size, char *err, size_t errsz)</td></tr>
<tr class="memdesc:ad5a6d86e99a96405eb2d6daf95603691"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate a loaded tensor map against a mapped weights binary.  <br /></td></tr>
<tr class="separator:ad5a6d86e99a96405eb2d6daf95603691"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3024ccd4a9af5109d24e6c57565d74a1" name="a3024ccd4a9af5109d24e6c57565d74a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3024ccd4a9af5109d24e6c57565d74a1">&#9670;&#160;</a></span>_POSIX_C_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _POSIX_C_SOURCE&#160;&#160;&#160;200809L</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00005">5</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a9e71207990621a1e9a86b6c61a93fbbc" name="a9e71207990621a1e9a86b6c61a93fbbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e71207990621a1e9a86b6c61a93fbbc">&#9670;&#160;</a></span>tm_sort_ref_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtm__sort__ref__s.html">tm_sort_ref_s</a> <a class="el" href="tensor__map_8c.html#a9e71207990621a1e9a86b6c61a93fbbc">tm_sort_ref_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a935215259f1e01927022c50c39b8f197" name="a935215259f1e01927022c50c39b8f197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935215259f1e01927022c50c39b8f197">&#9670;&#160;</a></span>ie_streq_case_ascii()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ie_streq_case_ascii </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Case-insensitive ASCII equality for short identifiers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>String A. </td></tr>
    <tr><td class="paramname">b</td><td>String B. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if equal, 0 otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00236">236</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  236</span>                                                             {</div>
<div class="line"><span class="lineno">  237</span>  <span class="keywordflow">if</span> (!a || !b) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  238</span>  <span class="keywordflow">while</span> (*a &amp;&amp; *b) {</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ca = <a class="code hl_function" href="tensor__map_8c.html#a16fd8cdfb13d3c08166460f7c2e6d7b2">ie_tolower_ascii</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*a++);</div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cb = <a class="code hl_function" href="tensor__map_8c.html#a16fd8cdfb13d3c08166460f7c2e6d7b2">ie_tolower_ascii</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*b++);</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span> (ca != cb) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  242</span>  }</div>
<div class="line"><span class="lineno">  243</span>  <span class="keywordflow">return</span> (*a == <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; *b == <span class="charliteral">&#39;\0&#39;</span>) ? 1 : 0;</div>
<div class="line"><span class="lineno">  244</span>}</div>
<div class="ttc" id="atensor__map_8c_html_a16fd8cdfb13d3c08166460f7c2e6d7b2"><div class="ttname"><a href="tensor__map_8c.html#a16fd8cdfb13d3c08166460f7c2e6d7b2">ie_tolower_ascii</a></div><div class="ttdeci">static unsigned char ie_tolower_ascii(unsigned char c)</div><div class="ttdoc">Lowercase ASCII character without locale effects.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00225">tensor_map.c:225</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00225">ie_tolower_ascii()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00260">parse_dtype()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a935215259f1e01927022c50c39b8f197_cgraph.svg" width="334" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a935215259f1e01927022c50c39b8f197_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a16fd8cdfb13d3c08166460f7c2e6d7b2" name="a16fd8cdfb13d3c08166460f7c2e6d7b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16fd8cdfb13d3c08166460f7c2e6d7b2">&#9670;&#160;</a></span>ie_tolower_ascii()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned char ie_tolower_ascii </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lowercase ASCII character without locale effects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>Input byte. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Lowercased byte. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00225">225</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  225</span>                                                       {</div>
<div class="line"><span class="lineno">  226</span>  <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;Z&#39;</span>) <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(c - <span class="charliteral">&#39;A&#39;</span> + <span class="charliteral">&#39;a&#39;</span>);</div>
<div class="line"><span class="lineno">  227</span>  <span class="keywordflow">return</span> c;</div>
<div class="line"><span class="lineno">  228</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00236">ie_streq_case_ascii()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a16fd8cdfb13d3c08166460f7c2e6d7b2_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a86b10318f8d32a99fd516d382b211913" name="a86b10318f8d32a99fd516d382b211913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86b10318f8d32a99fd516d382b211913">&#9670;&#160;</a></span>parse_dtype()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="tensor__map_8h.html#ac1e5d7196426dbb29e3f26f38f4cde89">tensor_dtype_t</a> parse_dtype </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse dtype string into tensor_dtype_t. </p>
<p>Accepts common spellings and is ASCII case-insensitive:</p><ul>
<li>"bf16", "BF16", "bfloat16"</li>
<li>"f16", "fp16", "float16"</li>
<li>"f32", "fp32", "float32"</li>
<li>"u8", "uint8"</li>
<li>"int4"</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>Input dtype string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Parsed dtype tag. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00260">260</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  260</span>                                                 {</div>
<div class="line"><span class="lineno">  261</span>  <span class="keywordflow">if</span> (!s) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60afc9691802827f535b2385da565e74947">TENSOR_DTYPE_UNKNOWN</a>;</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;float32&quot;</span>) || <a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;f32&quot;</span>) || <a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;fp32&quot;</span>))</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a8be2bde5845696812a062797ff5db779">TENSOR_DTYPE_F32</a>;</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;float16&quot;</span>) || <a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;f16&quot;</span>) || <a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;fp16&quot;</span>))</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60abd617fa72c8bfbdcd703732a2a74e9fe">TENSOR_DTYPE_F16</a>;</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;bf16&quot;</span>) || <a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;bfloat16&quot;</span>))</div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a205d1b0175039c386b1f907101942387">TENSOR_DTYPE_BF16</a>;</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;u8&quot;</span>) || <a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;uint8&quot;</span>))</div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a28cbf2aeff36d35b8a7d954fb0ca333b">TENSOR_DTYPE_U8</a>;</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a>(s, <span class="stringliteral">&quot;int4&quot;</span>))</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a7d14acd31ad346fe41c149dc7270d20d">TENSOR_DTYPE_INT4</a>;</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60afc9691802827f535b2385da565e74947">TENSOR_DTYPE_UNKNOWN</a>;</div>
<div class="line"><span class="lineno">  279</span>}</div>
<div class="ttc" id="atensor__map_8c_html_a935215259f1e01927022c50c39b8f197"><div class="ttname"><a href="tensor__map_8c.html#a935215259f1e01927022c50c39b8f197">ie_streq_case_ascii</a></div><div class="ttdeci">static int ie_streq_case_ascii(const char *a, const char *b)</div><div class="ttdoc">Case-insensitive ASCII equality for short identifiers.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00236">tensor_map.c:236</a></div></div>
<div class="ttc" id="atensor__map_8h_html_a2a2857711e062d6fafb189e11c772e60a205d1b0175039c386b1f907101942387"><div class="ttname"><a href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a205d1b0175039c386b1f907101942387">TENSOR_DTYPE_BF16</a></div><div class="ttdeci">@ TENSOR_DTYPE_BF16</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00050">tensor_map.h:50</a></div></div>
<div class="ttc" id="atensor__map_8h_html_a2a2857711e062d6fafb189e11c772e60a28cbf2aeff36d35b8a7d954fb0ca333b"><div class="ttname"><a href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a28cbf2aeff36d35b8a7d954fb0ca333b">TENSOR_DTYPE_U8</a></div><div class="ttdeci">@ TENSOR_DTYPE_U8</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00051">tensor_map.h:51</a></div></div>
<div class="ttc" id="atensor__map_8h_html_a2a2857711e062d6fafb189e11c772e60a7d14acd31ad346fe41c149dc7270d20d"><div class="ttname"><a href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a7d14acd31ad346fe41c149dc7270d20d">TENSOR_DTYPE_INT4</a></div><div class="ttdeci">@ TENSOR_DTYPE_INT4</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00049">tensor_map.h:49</a></div></div>
<div class="ttc" id="atensor__map_8h_html_a2a2857711e062d6fafb189e11c772e60a8be2bde5845696812a062797ff5db779"><div class="ttname"><a href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60a8be2bde5845696812a062797ff5db779">TENSOR_DTYPE_F32</a></div><div class="ttdeci">@ TENSOR_DTYPE_F32</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00047">tensor_map.h:47</a></div></div>
<div class="ttc" id="atensor__map_8h_html_a2a2857711e062d6fafb189e11c772e60abd617fa72c8bfbdcd703732a2a74e9fe"><div class="ttname"><a href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60abd617fa72c8bfbdcd703732a2a74e9fe">TENSOR_DTYPE_F16</a></div><div class="ttdeci">@ TENSOR_DTYPE_F16</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00048">tensor_map.h:48</a></div></div>
<div class="ttc" id="atensor__map_8h_html_a2a2857711e062d6fafb189e11c772e60afc9691802827f535b2385da565e74947"><div class="ttname"><a href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60afc9691802827f535b2385da565e74947">TENSOR_DTYPE_UNKNOWN</a></div><div class="ttdeci">@ TENSOR_DTYPE_UNKNOWN</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00053">tensor_map.h:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00236">ie_streq_case_ascii()</a>, <a class="el" href="tensor__map_8h_source.html#l00050">TENSOR_DTYPE_BF16</a>, <a class="el" href="tensor__map_8h_source.html#l00048">TENSOR_DTYPE_F16</a>, <a class="el" href="tensor__map_8h_source.html#l00047">TENSOR_DTYPE_F32</a>, <a class="el" href="tensor__map_8h_source.html#l00049">TENSOR_DTYPE_INT4</a>, <a class="el" href="tensor__map_8h_source.html#l00051">TENSOR_DTYPE_U8</a>, and <a class="el" href="tensor__map_8h_source.html#l00052">TENSOR_DTYPE_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a86b10318f8d32a99fd516d382b211913_cgraph.svg" width="484" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a86b10318f8d32a99fd516d382b211913_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a018b3eeeb442114239c9d39d309af8d0" name="a018b3eeeb442114239c9d39d309af8d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a018b3eeeb442114239c9d39d309af8d0">&#9670;&#160;</a></span>parse_shape_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * parse_shape_array </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t **&#160;</td>
          <td class="paramname"><em>out_shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>out_ndim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse a JSON array of integers into a shape array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer. </td></tr>
    <tr><td class="paramname">out_shape</td><td>Receives malloc'd shape array (caller frees). </td></tr>
    <tr><td class="paramname">out_ndim</td><td>Receives dimension count. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer after the closing ']', or NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00341">341</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  341</span>                                                                                              {</div>
<div class="line"><span class="lineno">  342</span>  <span class="keywordflow">if</span> (!p || !out_shape || !out_ndim) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  343</span>  *out_shape = NULL;</div>
<div class="line"><span class="lineno">  344</span>  *out_ndim = 0;</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>  p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  347</span>  <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;[&#39;</span>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  348</span>  ++p;</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>  uint32_t tmp[32];</div>
<div class="line"><span class="lineno">  351</span>  uint32_t nd = 0;</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  354</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> (!*p) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;]&#39;</span>) { ++p; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    uint64_t v = 0;</div>
<div class="line"><span class="lineno">  359</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a532a65d5913530d35874854778a4b444">parse_u64</a>(p, &amp;v);</div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">if</span> (!q) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  361</span>    p = q;</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">if</span> (nd &lt; 32u) tmp[nd++] = (uint32_t)v;</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) { ++p; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  367</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;]&#39;</span>) { ++p; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  369</span>  }</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>  <span class="keywordflow">if</span> (nd &gt; 0u) {</div>
<div class="line"><span class="lineno">  372</span>    uint32_t *shape = (uint32_t *)malloc((<span class="keywordtype">size_t</span>)nd * <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line"><span class="lineno">  373</span>    <span class="keywordflow">if</span> (!shape) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  374</span>    memcpy(shape, tmp, (<span class="keywordtype">size_t</span>)nd * <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line"><span class="lineno">  375</span>    *out_shape = shape;</div>
<div class="line"><span class="lineno">  376</span>    *out_ndim = nd;</div>
<div class="line"><span class="lineno">  377</span>  }</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>  <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">  380</span>}</div>
<div class="ttc" id="atensor__map_8c_html_a532a65d5913530d35874854778a4b444"><div class="ttname"><a href="tensor__map_8c.html#a532a65d5913530d35874854778a4b444">parse_u64</a></div><div class="ttdeci">static const char * parse_u64(const char *p, uint64_t *out)</div><div class="ttdoc">Parse an unsigned decimal integer.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00114">tensor_map.c:114</a></div></div>
<div class="ttc" id="atensor__map_8c_html_ae19e0ad12742fe7fdff22f60436aadc7"><div class="ttname"><a href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a></div><div class="ttdeci">static const char * skip_ws(const char *p)</div><div class="ttdoc">Skip ASCII whitespace in a JSON string.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00024">tensor_map.c:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00114">parse_u64()</a>, and <a class="el" href="tensor__map_8c_source.html#l00024">skip_ws()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a018b3eeeb442114239c9d39d309af8d0_cgraph.svg" width="416" height="62"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a018b3eeeb442114239c9d39d309af8d0_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a3dae92b1c084251e956a5773e53869b5" name="a3dae92b1c084251e956a5773e53869b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dae92b1c084251e956a5773e53869b5">&#9670;&#160;</a></span>parse_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * parse_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse a JSON string literal (minimal escape handling). </p>
<p>This parser preserves escape sequences by copying the escaped character verbatim, which is sufficient for the tensor names used by this project.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer (must point at '"'). </td></tr>
    <tr><td class="paramname">out</td><td>Receives malloc'd C string (caller frees). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to first character after the closing quote, or NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00072">72</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>                                                           {</div>
<div class="line"><span class="lineno">   73</span>  <span class="keywordflow">if</span> (!p || !out) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   74</span>  <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;&quot;&#39;</span>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   75</span>  ++p;</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>  <span class="keywordtype">size_t</span> cap = 64u, len = 0u;</div>
<div class="line"><span class="lineno">   78</span>  <span class="keywordtype">char</span> *buf = (<span class="keywordtype">char</span> *)malloc(cap);</div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordflow">if</span> (!buf) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordflow">while</span> (*p) {</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;&quot;&#39;</span>) {</div>
<div class="line"><span class="lineno">   83</span>      buf[len] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">   84</span>      *<a class="code hl_variable" href="namespaceconvert__dtypes__to__numeric.html#a0332296ea5bde95f8e72005df06144a8">out</a> = buf;</div>
<div class="line"><span class="lineno">   85</span>      <span class="keywordflow">return</span> p + 1;</div>
<div class="line"><span class="lineno">   86</span>    }</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;\\&#39;</span>) {</div>
<div class="line"><span class="lineno">   89</span>      ++p;</div>
<div class="line"><span class="lineno">   90</span>      <span class="keywordflow">if</span> (!*p) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   91</span>      <span class="comment">/* Keep escaped char verbatim (sufficient for our JSON). */</span></div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> (len + 1u &gt;= cap) {</div>
<div class="line"><span class="lineno">   95</span>      cap *= 2u;</div>
<div class="line"><span class="lineno">   96</span>      <span class="keywordtype">char</span> *nb = (<span class="keywordtype">char</span> *)realloc(buf, cap);</div>
<div class="line"><span class="lineno">   97</span>      <span class="keywordflow">if</span> (!nb) { free(buf); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">   98</span>      buf = nb;</div>
<div class="line"><span class="lineno">   99</span>    }</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>    buf[len++] = *p++;</div>
<div class="line"><span class="lineno">  102</span>  }</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>  free(buf);</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  106</span>}</div>
<div class="ttc" id="anamespaceconvert__dtypes__to__numeric_html_a0332296ea5bde95f8e72005df06144a8"><div class="ttname"><a href="namespaceconvert__dtypes__to__numeric.html#a0332296ea5bde95f8e72005df06144a8">convert_dtypes_to_numeric.out</a></div><div class="ttdeci">dict out</div><div class="ttdef"><b>Definition</b> <a href="convert__dtypes__to__numeric_8py_source.html#l00029">convert_dtypes_to_numeric.py:29</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>, <a class="el" href="tensor__map_8c_source.html#l00158">skip_object()</a>, <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, and <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a3dae92b1c084251e956a5773e53869b5_icgraph.svg" width="100%" height="446"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a180580870bc40b8b36b78f81a1c26178" name="a180580870bc40b8b36b78f81a1c26178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a180580870bc40b8b36b78f81a1c26178">&#9670;&#160;</a></span>parse_tensor_object()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * parse_tensor_object </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>map_style_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *&#160;</td>
          <td class="paramname"><em>td</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_ok</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse a tensor descriptor object. </p>
<p>If <code>map_style_name</code> is non-NULL, td-&gt;name is taken from it and "name" is optional. If <code>map_style_name</code> is NULL, the "name" field is required.</p>
<p>Also accepts "nbytes" as an alias for "size_bytes" for compatibility with some emitters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer (must point at '{'). </td></tr>
    <tr><td class="paramname">map_style_name</td><td>Optional name from map-style JSON key. </td></tr>
    <tr><td class="paramname">td</td><td>Output descriptor (takes ownership of allocated fields). </td></tr>
    <tr><td class="paramname">out_ok</td><td>Receives 1 if parsed and has a name, 0 otherwise. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer after the closing '}', or NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00397">397</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  397</span>                                                                                                                  {</div>
<div class="line"><span class="lineno">  398</span>  <span class="keywordflow">if</span> (!p || !td || !out_ok) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  399</span>  *out_ok = 0;</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>  p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  402</span>  <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;{&#39;</span>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  403</span>  ++p;</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>  <a class="code hl_function" href="tensor__map_8c.html#abce6e7f7fc0bc9c46436c0d41c8a72ae">tensor_desc_zero</a>(td);</div>
<div class="line"><span class="lineno">  406</span>  <span class="keywordflow">if</span> (map_style_name) {</div>
<div class="line"><span class="lineno">  407</span>    td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a> = (<span class="keywordtype">char</span> *)malloc(strlen(map_style_name) + 1u);</div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordflow">if</span> (!td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  409</span>    memcpy(td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>, map_style_name, strlen(map_style_name) + 1u);</div>
<div class="line"><span class="lineno">  410</span>  }</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  413</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">if</span> (!*p) { <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;}&#39;</span>) { ++p; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordtype">char</span> *key = NULL;</div>
<div class="line"><span class="lineno">  418</span>    p = <a class="code hl_function" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a>(p, &amp;key);</div>
<div class="line"><span class="lineno">  419</span>    <span class="keywordflow">if</span> (!p) { <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  422</span>    <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;:&#39;</span>) { free(key); <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  423</span>    ++p;</div>
<div class="line"><span class="lineno">  424</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">if</span> (strcmp(key, <span class="stringliteral">&quot;name&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  427</span>      <span class="keywordtype">char</span> *nm = NULL;</div>
<div class="line"><span class="lineno">  428</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a>(p, &amp;nm);</div>
<div class="line"><span class="lineno">  429</span>      <span class="keywordflow">if</span> (!q) { free(key); <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  430</span>      p = q;</div>
<div class="line"><span class="lineno">  431</span>      <span class="keywordflow">if</span> (!td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>) {</div>
<div class="line"><span class="lineno">  432</span>        td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a> = nm;</div>
<div class="line"><span class="lineno">  433</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  434</span>        free(nm);</div>
<div class="line"><span class="lineno">  435</span>      }</div>
<div class="line"><span class="lineno">  436</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(key, <span class="stringliteral">&quot;offset&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  437</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a532a65d5913530d35874854778a4b444">parse_u64</a>(p, &amp;td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a0abe393a370bda31eda8ab11a5f8df37">offset</a>);</div>
<div class="line"><span class="lineno">  438</span>      <span class="keywordflow">if</span> (!q) { free(key); <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  439</span>      p = q;</div>
<div class="line"><span class="lineno">  440</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(key, <span class="stringliteral">&quot;size_bytes&quot;</span>) == 0 || strcmp(key, <span class="stringliteral">&quot;nbytes&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  441</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a532a65d5913530d35874854778a4b444">parse_u64</a>(p, &amp;td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a151674f0f1ad60320437f028593d8b26">size_bytes</a>);</div>
<div class="line"><span class="lineno">  442</span>      <span class="keywordflow">if</span> (!q) { free(key); <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  443</span>      p = q;</div>
<div class="line"><span class="lineno">  444</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(key, <span class="stringliteral">&quot;dtype&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  445</span>      <span class="keywordtype">char</span> *ds = NULL;</div>
<div class="line"><span class="lineno">  446</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a>(p, &amp;ds);</div>
<div class="line"><span class="lineno">  447</span>      <span class="keywordflow">if</span> (!q) { free(key); <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  448</span>      p = q;</div>
<div class="line"><span class="lineno">  449</span>      td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#ab88eba5b794240beb885009efb7cd5ec">dtype</a> = <a class="code hl_function" href="tensor__map_8c.html#a86b10318f8d32a99fd516d382b211913">parse_dtype</a>(ds);</div>
<div class="line"><span class="lineno">  450</span>      free(ds);</div>
<div class="line"><span class="lineno">  451</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(key, <span class="stringliteral">&quot;shape&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  452</span>      uint32_t *shape = NULL;</div>
<div class="line"><span class="lineno">  453</span>      uint32_t ndim = 0;</div>
<div class="line"><span class="lineno">  454</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a018b3eeeb442114239c9d39d309af8d0">parse_shape_array</a>(p, &amp;shape, &amp;ndim);</div>
<div class="line"><span class="lineno">  455</span>      <span class="keywordflow">if</span> (!q) { free(key); <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  456</span>      p = q;</div>
<div class="line"><span class="lineno">  457</span>      td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#afd3b79d2fae3209ac079b6ee551c31c7">shape</a> = shape;</div>
<div class="line"><span class="lineno">  458</span>      td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a39d73e77fad5a093361fb4d0816c7d5f">ndim</a> = ndim;</div>
<div class="line"><span class="lineno">  459</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  460</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(p);</div>
<div class="line"><span class="lineno">  461</span>      <span class="keywordflow">if</span> (!q) { free(key); <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td); <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><span class="lineno">  462</span>      p = q;</div>
<div class="line"><span class="lineno">  463</span>    }</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>    free(key);</div>
<div class="line"><span class="lineno">  466</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) { ++p; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;}&#39;</span>) { ++p; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  469</span>  }</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>  <span class="keywordflow">if</span> (!td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>) {</div>
<div class="line"><span class="lineno">  472</span>    <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(td);</div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  474</span>  }</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>  *out_ok = 1;</div>
<div class="line"><span class="lineno">  477</span>  <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">  478</span>}</div>
<div class="ttc" id="astructtensor__desc__s_html_a0abe393a370bda31eda8ab11a5f8df37"><div class="ttname"><a href="structtensor__desc__s.html#a0abe393a370bda31eda8ab11a5f8df37">tensor_desc_s::offset</a></div><div class="ttdeci">uint64_t offset</div><div class="ttdoc">Byte offset in model.ie.bin.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00096">tensor_map.h:96</a></div></div>
<div class="ttc" id="astructtensor__desc__s_html_a1134b2dbce500003f3b011f3e8a3d090"><div class="ttname"><a href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">tensor_desc_s::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Tensor name (owned, heap).</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00094">tensor_map.h:94</a></div></div>
<div class="ttc" id="astructtensor__desc__s_html_a151674f0f1ad60320437f028593d8b26"><div class="ttname"><a href="structtensor__desc__s.html#a151674f0f1ad60320437f028593d8b26">tensor_desc_s::size_bytes</a></div><div class="ttdeci">uint64_t size_bytes</div><div class="ttdoc">Size in bytes.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00098">tensor_map.h:98</a></div></div>
<div class="ttc" id="astructtensor__desc__s_html_a39d73e77fad5a093361fb4d0816c7d5f"><div class="ttname"><a href="structtensor__desc__s.html#a39d73e77fad5a093361fb4d0816c7d5f">tensor_desc_s::ndim</a></div><div class="ttdeci">uint32_t ndim</div><div class="ttdoc">Number of dims in shape.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00105">tensor_map.h:105</a></div></div>
<div class="ttc" id="astructtensor__desc__s_html_ab88eba5b794240beb885009efb7cd5ec"><div class="ttname"><a href="structtensor__desc__s.html#ab88eba5b794240beb885009efb7cd5ec">tensor_desc_s::dtype</a></div><div class="ttdeci">tensor_dtype_t dtype</div><div class="ttdoc">Dtype tag (may be unknown if absent in json).</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00100">tensor_map.h:100</a></div></div>
<div class="ttc" id="astructtensor__desc__s_html_afd3b79d2fae3209ac079b6ee551c31c7"><div class="ttname"><a href="structtensor__desc__s.html#afd3b79d2fae3209ac079b6ee551c31c7">tensor_desc_s::shape</a></div><div class="ttdeci">uint32_t * shape</div><div class="ttdoc">Shape dims array (owned, heap), may be NULL when absent.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00103">tensor_map.h:103</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a018b3eeeb442114239c9d39d309af8d0"><div class="ttname"><a href="tensor__map_8c.html#a018b3eeeb442114239c9d39d309af8d0">parse_shape_array</a></div><div class="ttdeci">static const char * parse_shape_array(const char *p, uint32_t **out_shape, uint32_t *out_ndim)</div><div class="ttdoc">Parse a JSON array of integers into a shape array.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00341">tensor_map.c:341</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a3dae92b1c084251e956a5773e53869b5"><div class="ttname"><a href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a></div><div class="ttdeci">static const char * parse_string(const char *p, char **out)</div><div class="ttdoc">Parse a JSON string literal (minimal escape handling).</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00072">tensor_map.c:72</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a751de8ccde16854a65c185afdfecfdbf"><div class="ttname"><a href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a></div><div class="ttdeci">static const char * skip_value(const char *p)</div><div class="ttdoc">Skip any JSON value (string/object/array/number/true/false/null).</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00191">tensor_map.c:191</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a86b10318f8d32a99fd516d382b211913"><div class="ttname"><a href="tensor__map_8c.html#a86b10318f8d32a99fd516d382b211913">parse_dtype</a></div><div class="ttdeci">static tensor_dtype_t parse_dtype(const char *s)</div><div class="ttdoc">Parse dtype string into tensor_dtype_t.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00260">tensor_map.c:260</a></div></div>
<div class="ttc" id="atensor__map_8c_html_aa6b53de7ce006a1a2877e2b19ad8ce24"><div class="ttname"><a href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a></div><div class="ttdeci">static void tensor_desc_free(tensor_desc_t *td)</div><div class="ttdoc">Free owned fields of a tensor descriptor and reset it.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00303">tensor_map.c:303</a></div></div>
<div class="ttc" id="atensor__map_8c_html_abce6e7f7fc0bc9c46436c0d41c8a72ae"><div class="ttname"><a href="tensor__map_8c.html#abce6e7f7fc0bc9c46436c0d41c8a72ae">tensor_desc_zero</a></div><div class="ttdeci">static void tensor_desc_zero(tensor_desc_t *td)</div><div class="ttdoc">Zero-initialize a tensor descriptor.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00289">tensor_map.c:289</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8h_source.html#l00100">tensor_desc_s::dtype</a>, <a class="el" href="tensor__map_8h_source.html#l00094">tensor_desc_s::name</a>, <a class="el" href="tensor__map_8h_source.html#l00105">tensor_desc_s::ndim</a>, <a class="el" href="tensor__map_8h_source.html#l00096">tensor_desc_s::offset</a>, <a class="el" href="tensor__map_8c_source.html#l00260">parse_dtype()</a>, <a class="el" href="tensor__map_8c_source.html#l00341">parse_shape_array()</a>, <a class="el" href="tensor__map_8c_source.html#l00072">parse_string()</a>, <a class="el" href="tensor__map_8c_source.html#l00114">parse_u64()</a>, <a class="el" href="tensor__map_8h_source.html#l00103">tensor_desc_s::shape</a>, <a class="el" href="tensor__map_8h_source.html#l00098">tensor_desc_s::size_bytes</a>, <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, <a class="el" href="tensor__map_8c_source.html#l00024">skip_ws()</a>, <a class="el" href="tensor__map_8c_source.html#l00303">tensor_desc_free()</a>, and <a class="el" href="tensor__map_8c_source.html#l00289">tensor_desc_zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a180580870bc40b8b36b78f81a1c26178_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a180580870bc40b8b36b78f81a1c26178_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a532a65d5913530d35874854778a4b444" name="a532a65d5913530d35874854778a4b444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a532a65d5913530d35874854778a4b444">&#9670;&#160;</a></span>parse_u64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * parse_u64 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse an unsigned decimal integer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer. </td></tr>
    <tr><td class="paramname">out</td><td>Receives parsed value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer after the number, or NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00114">114</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  114</span>                                                           {</div>
<div class="line"><span class="lineno">  115</span>  <span class="keywordflow">if</span> (!p || !out) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  116</span>  p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>  uint64_t v = 0;</div>
<div class="line"><span class="lineno">  119</span>  <span class="keywordflow">if</span> (!isdigit((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*p)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordflow">while</span> (isdigit((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*p)) {</div>
<div class="line"><span class="lineno">  122</span>    v = v * 10u + (uint64_t)(*p - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><span class="lineno">  123</span>    ++p;</div>
<div class="line"><span class="lineno">  124</span>  }</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>  *<a class="code hl_variable" href="namespaceconvert__dtypes__to__numeric.html#a0332296ea5bde95f8e72005df06144a8">out</a> = v;</div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">  128</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00024">skip_ws()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00341">parse_shape_array()</a>, <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>, and <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a532a65d5913530d35874854778a4b444_cgraph.svg" width="223" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a532a65d5913530d35874854778a4b444_icgraph.svg" width="100%" height="440"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a87fc763c39a4a64f091406e88b1c640e" name="a87fc763c39a4a64f091406e88b1c640e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87fc763c39a4a64f091406e88b1c640e">&#9670;&#160;</a></span>push_tensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int push_tensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> **&#160;</td>
          <td class="paramname"><em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append a tensor descriptor to a growable array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arr</td><td>In/out array pointer. </td></tr>
    <tr><td class="paramname">count</td><td>In/out count. </td></tr>
    <tr><td class="paramname">cap</td><td>In/out capacity. </td></tr>
    <tr><td class="paramname">src</td><td>Source descriptor (shallow-copied; ownership transfers to array). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00318">318</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  318</span>                                                                                                      {</div>
<div class="line"><span class="lineno">  319</span>  <span class="keywordflow">if</span> (!arr || !count || !cap || !src) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>  <span class="keywordflow">if</span> (*count == *cap) {</div>
<div class="line"><span class="lineno">  322</span>    uint32_t ncap = (*cap == 0u) ? 256u : (*cap * 2u);</div>
<div class="line"><span class="lineno">  323</span>    <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *na = (<a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *)realloc(*arr, (<span class="keywordtype">size_t</span>)ncap * <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a>));</div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordflow">if</span> (!na) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  325</span>    *arr = na;</div>
<div class="line"><span class="lineno">  326</span>    *cap = ncap;</div>
<div class="line"><span class="lineno">  327</span>  }</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>  (*arr)[*count] = *<a class="code hl_variable" href="namespaceconvert__dtypes__to__numeric.html#a6e1f8f63edf468d486e77c62d293460f">src</a>;</div>
<div class="line"><span class="lineno">  330</span>  (*count)++;</div>
<div class="line"><span class="lineno">  331</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  332</span>}</div>
<div class="ttc" id="anamespaceconvert__dtypes__to__numeric_html_a6e1f8f63edf468d486e77c62d293460f"><div class="ttname"><a href="namespaceconvert__dtypes__to__numeric.html#a6e1f8f63edf468d486e77c62d293460f">convert_dtypes_to_numeric.src</a></div><div class="ttdeci">src</div><div class="ttdef"><b>Definition</b> <a href="convert__dtypes__to__numeric_8py_source.html#l00026">convert_dtypes_to_numeric.py:26</a></div></div>
<div class="ttc" id="astructtensor__desc__s_html"><div class="ttname"><a href="structtensor__desc__s.html">tensor_desc_s</a></div><div class="ttdoc">Tensor descriptor resolved from tensor_map.json.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00092">tensor_map.h:92</a></div></div>
<div class="ttc" id="atensor__map_8h_html_a1ed0f6ce08b1582103651d4fd14a30f1"><div class="ttname"><a href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a></div><div class="ttdeci">struct tensor_desc_s tensor_desc_t</div><div class="ttdoc">Tensor descriptor resolved from tensor_map.json.</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a87fc763c39a4a64f091406e88b1c640e_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a9ab7221db47755779150a9cc3c374b8f" name="a9ab7221db47755779150a9cc3c374b8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ab7221db47755779150a9cc3c374b8f">&#9670;&#160;</a></span>read_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read an entire file into a NUL-terminated buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to read. </td></tr>
    <tr><td class="paramname">out</td><td>Receives malloc'd buffer (caller frees). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00035">35</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   35</span>                                                   {</div>
<div class="line"><span class="lineno">   36</span>  <span class="keywordflow">if</span> (!path || !out) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>  FILE *f = fopen(path, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno">   39</span>  <span class="keywordflow">if</span> (!f) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>  <span class="keywordflow">if</span> (fseek(f, 0, SEEK_END) != 0) { fclose(f); <span class="keywordflow">return</span> -1; }</div>
<div class="line"><span class="lineno">   42</span>  <span class="keywordtype">long</span> n = ftell(f);</div>
<div class="line"><span class="lineno">   43</span>  <span class="keywordflow">if</span> (n &lt;= 0) { fclose(f); <span class="keywordflow">return</span> -1; }</div>
<div class="line"><span class="lineno">   44</span>  <span class="keywordflow">if</span> (fseek(f, 0, SEEK_SET) != 0) { fclose(f); <span class="keywordflow">return</span> -1; }</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>  <span class="keywordtype">char</span> *buf = (<span class="keywordtype">char</span> *)malloc((<span class="keywordtype">size_t</span>)n + 1u);</div>
<div class="line"><span class="lineno">   47</span>  <span class="keywordflow">if</span> (!buf) { fclose(f); <span class="keywordflow">return</span> -1; }</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>  <span class="keywordtype">size_t</span> got = fread(buf, 1, (<span class="keywordtype">size_t</span>)n, f);</div>
<div class="line"><span class="lineno">   50</span>  fclose(f);</div>
<div class="line"><span class="lineno">   51</span>  <span class="keywordflow">if</span> (got != (<span class="keywordtype">size_t</span>)n) {</div>
<div class="line"><span class="lineno">   52</span>    free(buf);</div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   54</span>  }</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>  buf[n] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">   57</span>  *<a class="code hl_variable" href="namespaceconvert__dtypes__to__numeric.html#a0332296ea5bde95f8e72005df06144a8">out</a> = buf;</div>
<div class="line"><span class="lineno">   58</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   59</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a9ab7221db47755779150a9cc3c374b8f_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a86c69aef66f60185ab7bfe466d7eb1d3" name="a86c69aef66f60185ab7bfe466d7eb1d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c69aef66f60185ab7bfe466d7eb1d3">&#9670;&#160;</a></span>skip_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * skip_array </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Skip a JSON array value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer (must point at '['). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer after the closing ']', or NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00137">137</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  137</span>                                             {</div>
<div class="line"><span class="lineno">  138</span>  <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;[&#39;</span>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  139</span>  ++p;</div>
<div class="line"><span class="lineno">  140</span>  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  141</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordflow">if</span> (!*p) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;]&#39;</span>) <span class="keywordflow">return</span> p + 1;</div>
<div class="line"><span class="lineno">  144</span>    p = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(p);</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">if</span> (!p) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  146</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) { ++p; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;]&#39;</span>) <span class="keywordflow">return</span> p + 1;</div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  150</span>  }</div>
<div class="line"><span class="lineno">  151</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, and <a class="el" href="tensor__map_8c_source.html#l00024">skip_ws()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, and <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a86c69aef66f60185ab7bfe466d7eb1d3_cgraph.svg" width="536" height="140"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a86c69aef66f60185ab7bfe466d7eb1d3_icgraph.svg" width="100%" height="425"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a9e5190012370782147588f3b3b6a4886" name="a9e5190012370782147588f3b3b6a4886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e5190012370782147588f3b3b6a4886">&#9670;&#160;</a></span>skip_object()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * skip_object </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Skip a JSON object value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer (must point at '{'). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer after the closing '}', or NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00158">158</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>                                              {</div>
<div class="line"><span class="lineno">  159</span>  <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;{&#39;</span>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  160</span>  ++p;</div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  162</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">if</span> (!*p) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;}&#39;</span>) <span class="keywordflow">return</span> p + 1;</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordtype">char</span> *k = NULL;</div>
<div class="line"><span class="lineno">  167</span>    p = <a class="code hl_function" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a>(p, &amp;k);</div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">if</span> (!p) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  169</span>    free(k);</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;:&#39;</span>) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  173</span>    ++p;</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  176</span>    p = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(p);</div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span> (!p) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>    p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) { ++p; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;}&#39;</span>) <span class="keywordflow">return</span> p + 1;</div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  183</span>  }</div>
<div class="line"><span class="lineno">  184</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00072">parse_string()</a>, <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, and <a class="el" href="tensor__map_8c_source.html#l00024">skip_ws()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, and <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a9e5190012370782147588f3b3b6a4886_cgraph.svg" width="520" height="208"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a9e5190012370782147588f3b3b6a4886_icgraph.svg" width="100%" height="425"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a751de8ccde16854a65c185afdfecfdbf" name="a751de8ccde16854a65c185afdfecfdbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a751de8ccde16854a65c185afdfecfdbf">&#9670;&#160;</a></span>skip_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * skip_value </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Skip any JSON value (string/object/array/number/true/false/null). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer after the value, or NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00191">191</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  191</span>                                             {</div>
<div class="line"><span class="lineno">  192</span>  p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  193</span>  <span class="keywordflow">if</span> (!*p) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>  <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;&quot;&#39;</span>) {</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordtype">char</span> *tmp = NULL;</div>
<div class="line"><span class="lineno">  197</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a>(p, &amp;tmp);</div>
<div class="line"><span class="lineno">  198</span>    free(tmp);</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">return</span> q;</div>
<div class="line"><span class="lineno">  200</span>  }</div>
<div class="line"><span class="lineno">  201</span>  <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;{&#39;</span>) <span class="keywordflow">return</span> <a class="code hl_function" href="tensor__map_8c.html#a9e5190012370782147588f3b3b6a4886">skip_object</a>(p);</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;[&#39;</span>) <span class="keywordflow">return</span> <a class="code hl_function" href="tensor__map_8c.html#a86c69aef66f60185ab7bfe466d7eb1d3">skip_array</a>(p);</div>
<div class="line"><span class="lineno">  203</span>  <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;-&#39;</span> || isdigit((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*p)) {</div>
<div class="line"><span class="lineno">  204</span>    uint64_t dummy = 0;</div>
<div class="line"><span class="lineno">  205</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a532a65d5913530d35874854778a4b444">parse_u64</a>(p, &amp;dummy);</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">return</span> q ? q : NULL;</div>
<div class="line"><span class="lineno">  207</span>  }</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>  <span class="keywordflow">if</span> (strncmp(p, <span class="stringliteral">&quot;true&quot;</span>, 4) == 0) <span class="keywordflow">return</span> p + 4;</div>
<div class="line"><span class="lineno">  210</span>  <span class="keywordflow">if</span> (strncmp(p, <span class="stringliteral">&quot;false&quot;</span>, 5) == 0) <span class="keywordflow">return</span> p + 5;</div>
<div class="line"><span class="lineno">  211</span>  <span class="keywordflow">if</span> (strncmp(p, <span class="stringliteral">&quot;null&quot;</span>, 4) == 0) <span class="keywordflow">return</span> p + 4;</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  214</span>}</div>
<div class="ttc" id="atensor__map_8c_html_a86c69aef66f60185ab7bfe466d7eb1d3"><div class="ttname"><a href="tensor__map_8c.html#a86c69aef66f60185ab7bfe466d7eb1d3">skip_array</a></div><div class="ttdeci">static const char * skip_array(const char *p)</div><div class="ttdoc">Skip a JSON array value.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00137">tensor_map.c:137</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a9e5190012370782147588f3b3b6a4886"><div class="ttname"><a href="tensor__map_8c.html#a9e5190012370782147588f3b3b6a4886">skip_object</a></div><div class="ttdeci">static const char * skip_object(const char *p)</div><div class="ttdoc">Skip a JSON object value.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00158">tensor_map.c:158</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00072">parse_string()</a>, <a class="el" href="tensor__map_8c_source.html#l00114">parse_u64()</a>, <a class="el" href="tensor__map_8c_source.html#l00137">skip_array()</a>, <a class="el" href="tensor__map_8c_source.html#l00158">skip_object()</a>, and <a class="el" href="tensor__map_8c_source.html#l00024">skip_ws()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>, <a class="el" href="tensor__map_8c_source.html#l00137">skip_array()</a>, <a class="el" href="tensor__map_8c_source.html#l00158">skip_object()</a>, and <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a751de8ccde16854a65c185afdfecfdbf_cgraph.svg" width="398" height="210"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a751de8ccde16854a65c185afdfecfdbf_icgraph.svg" width="100%" height="440"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ae19e0ad12742fe7fdff22f60436aadc7" name="ae19e0ad12742fe7fdff22f60436aadc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19e0ad12742fe7fdff22f60436aadc7">&#9670;&#160;</a></span>skip_ws()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * skip_ws </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Skip ASCII whitespace in a JSON string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Input pointer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to first non-whitespace character (or NUL). </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00024">24</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>                                          {</div>
<div class="line"><span class="lineno">   25</span>  <span class="keywordflow">while</span> (*p &amp;&amp; (*p == <span class="charliteral">&#39; &#39;</span> || *p == <span class="charliteral">&#39;\t&#39;</span> || *p == <span class="charliteral">&#39;\n&#39;</span> || *p == <span class="charliteral">&#39;\r&#39;</span>)) ++p;</div>
<div class="line"><span class="lineno">   26</span>  <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">   27</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00341">parse_shape_array()</a>, <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>, <a class="el" href="tensor__map_8c_source.html#l00114">parse_u64()</a>, <a class="el" href="tensor__map_8c_source.html#l00137">skip_array()</a>, <a class="el" href="tensor__map_8c_source.html#l00158">skip_object()</a>, <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, and <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_ae19e0ad12742fe7fdff22f60436aadc7_icgraph.svg" width="100%" height="478"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa6b53de7ce006a1a2877e2b19ad8ce24" name="aa6b53de7ce006a1a2877e2b19ad8ce24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6b53de7ce006a1a2877e2b19ad8ce24">&#9670;&#160;</a></span>tensor_desc_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tensor_desc_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free owned fields of a tensor descriptor and reset it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td</td><td>Descriptor to free/reset. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00303">303</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  303</span>                                                {</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">if</span> (!td) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  305</span>  free(td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>);</div>
<div class="line"><span class="lineno">  306</span>  free(td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#afd3b79d2fae3209ac079b6ee551c31c7">shape</a>);</div>
<div class="line"><span class="lineno">  307</span>  <a class="code hl_function" href="tensor__map_8c.html#abce6e7f7fc0bc9c46436c0d41c8a72ae">tensor_desc_zero</a>(td);</div>
<div class="line"><span class="lineno">  308</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8h_source.html#l00094">tensor_desc_s::name</a>, <a class="el" href="tensor__map_8h_source.html#l00103">tensor_desc_s::shape</a>, and <a class="el" href="tensor__map_8c_source.html#l00289">tensor_desc_zero()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>, and <a class="el" href="tensor__map_8c_source.html#l00484">tensor_map_load()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_aa6b53de7ce006a1a2877e2b19ad8ce24_cgraph.svg" width="327" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_aa6b53de7ce006a1a2877e2b19ad8ce24_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="abce6e7f7fc0bc9c46436c0d41c8a72ae" name="abce6e7f7fc0bc9c46436c0d41c8a72ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce6e7f7fc0bc9c46436c0d41c8a72ae">&#9670;&#160;</a></span>tensor_desc_zero()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tensor_desc_zero </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> *&#160;</td>
          <td class="paramname"><em>td</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Zero-initialize a tensor descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td</td><td>Descriptor to clear. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00289">289</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  289</span>                                                {</div>
<div class="line"><span class="lineno">  290</span>  <span class="keywordflow">if</span> (!td) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  291</span>  td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a> = NULL;</div>
<div class="line"><span class="lineno">  292</span>  td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a0abe393a370bda31eda8ab11a5f8df37">offset</a> = 0;</div>
<div class="line"><span class="lineno">  293</span>  td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a151674f0f1ad60320437f028593d8b26">size_bytes</a> = 0;</div>
<div class="line"><span class="lineno">  294</span>  td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#ab88eba5b794240beb885009efb7cd5ec">dtype</a> = <a class="code hl_enumvalue" href="tensor__map_8h.html#a2a2857711e062d6fafb189e11c772e60afc9691802827f535b2385da565e74947">TENSOR_DTYPE_UNKNOWN</a>;</div>
<div class="line"><span class="lineno">  295</span>  td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#afd3b79d2fae3209ac079b6ee551c31c7">shape</a> = NULL;</div>
<div class="line"><span class="lineno">  296</span>  td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a39d73e77fad5a093361fb4d0816c7d5f">ndim</a> = 0;</div>
<div class="line"><span class="lineno">  297</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8h_source.html#l00100">tensor_desc_s::dtype</a>, <a class="el" href="tensor__map_8h_source.html#l00094">tensor_desc_s::name</a>, <a class="el" href="tensor__map_8h_source.html#l00105">tensor_desc_s::ndim</a>, <a class="el" href="tensor__map_8h_source.html#l00096">tensor_desc_s::offset</a>, <a class="el" href="tensor__map_8h_source.html#l00103">tensor_desc_s::shape</a>, <a class="el" href="tensor__map_8h_source.html#l00098">tensor_desc_s::size_bytes</a>, and <a class="el" href="tensor__map_8h_source.html#l00052">TENSOR_DTYPE_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>, and <a class="el" href="tensor__map_8c_source.html#l00303">tensor_desc_free()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_abce6e7f7fc0bc9c46436c0d41c8a72ae_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="abe58b80593931ffe5844ee4bcee805c5" name="abe58b80593931ffe5844ee4bcee805c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe58b80593931ffe5844ee4bcee805c5">&#9670;&#160;</a></span>tensor_map_find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a> * tensor_map_find </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a tensor descriptor by exact name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Loaded tensor map. </td></tr>
    <tr><td class="paramname">name</td><td>Tensor name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to descriptor, or NULL if not found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00662">662</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  662</span>                                                                                {</div>
<div class="line"><span class="lineno">  663</span>  <span class="keywordflow">if</span> (!map || !map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#acb71d934b0da86d92eb41c1992756bfd">loaded</a> || !name) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  664</span>  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">count</a>; ++i) {</div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">if</span> (map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[i].<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a> &amp;&amp; strcmp(map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[i].<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>, name) == 0)</div>
<div class="line"><span class="lineno">  666</span>      <span class="keywordflow">return</span> &amp;map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[i];</div>
<div class="line"><span class="lineno">  667</span>  }</div>
<div class="line"><span class="lineno">  668</span>  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  669</span>}</div>
<div class="ttc" id="astructtensor__map__s_html_a30493d1f3d1e66d1e9de6813c2844293"><div class="ttname"><a href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensor_map_s::tensors</a></div><div class="ttdeci">tensor_desc_t * tensors</div><div class="ttdoc">Tensor array.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00120">tensor_map.h:120</a></div></div>
<div class="ttc" id="astructtensor__map__s_html_a64c31242ffe43f6fc36b465d1ef75462"><div class="ttname"><a href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">tensor_map_s::count</a></div><div class="ttdeci">uint32_t count</div><div class="ttdoc">Number of entries in tensors.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00122">tensor_map.h:122</a></div></div>
<div class="ttc" id="astructtensor__map__s_html_acb71d934b0da86d92eb41c1992756bfd"><div class="ttname"><a href="structtensor__map__s.html#acb71d934b0da86d92eb41c1992756bfd">tensor_map_s::loaded</a></div><div class="ttdeci">int loaded</div><div class="ttdoc">Whether loader succeeded.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00124">tensor_map.h:124</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8h_source.html#l00122">tensor_map_s::count</a>, <a class="el" href="tensor__map_8h_source.html#l00124">tensor_map_s::loaded</a>, <a class="el" href="tensor__map_8h_source.html#l00094">tensor_desc_s::name</a>, and <a class="el" href="tensor__map_8h_source.html#l00120">tensor_map_s::tensors</a>.</p>

<p class="reference">Referenced by <a class="el" href="infer__gptoss_8c_source.html#l00798">ie_w_find()</a>, <a class="el" href="ie__api_8c_source.html#l00275">maybe_correct_head_dim_()</a>, <a class="el" href="gptoss__weights__index_8c_source.html#l00513">widx_detect_arch()</a>, <a class="el" href="gptoss__weights__index_8c_source.html#l00332">widx_find_any()</a>, <a class="el" href="gptoss__weights__index_8c_source.html#l00575">widx_resolve_layer_llama()</a>, and <a class="el" href="gptoss__weights__index_8c_source.html#l00794">widx_resolve_layer_neox()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_abe58b80593931ffe5844ee4bcee805c5_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a42d154b3f93b07c41b514e468a61c803" name="a42d154b3f93b07c41b514e468a61c803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42d154b3f93b07c41b514e468a61c803">&#9670;&#160;</a></span>tensor_map_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tensor_map_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free tensor map and all owned memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Tensor map (may be NULL). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00650">650</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  650</span>                                        {</div>
<div class="line"><span class="lineno">  651</span>  <span class="keywordflow">if</span> (!map || !map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">count</a>; ++i) {</div>
<div class="line"><span class="lineno">  654</span>    free(map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[i].<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>);</div>
<div class="line"><span class="lineno">  655</span>    free(map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[i].<a class="code hl_variable" href="structtensor__desc__s.html#afd3b79d2fae3209ac079b6ee551c31c7">shape</a>);</div>
<div class="line"><span class="lineno">  656</span>  }</div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span>  free(map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>);</div>
<div class="line"><span class="lineno">  659</span>  memset(map, 0, <span class="keyword">sizeof</span>(*map));</div>
<div class="line"><span class="lineno">  660</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8h_source.html#l00122">tensor_map_s::count</a>, <a class="el" href="tensor__map_8h_source.html#l00094">tensor_desc_s::name</a>, <a class="el" href="tensor__map_8h_source.html#l00103">tensor_desc_s::shape</a>, and <a class="el" href="tensor__map_8h_source.html#l00120">tensor_map_s::tensors</a>.</p>

<p class="reference">Referenced by <a class="el" href="gptoss__weights__index_8c_source.html#l00492">gptoss_weights_index_close()</a>, <a class="el" href="gptoss__weights__index_8c_source.html#l00417">gptoss_weights_index_open()</a>, <a class="el" href="infer__gptoss_8c_source.html#l01700">ie_gptoss_infer_create()</a>, <a class="el" href="infer__gptoss_8c_source.html#l02292">ie_gptoss_infer_destroy()</a>, and <a class="el" href="ie__api_8c_source.html#l00275">maybe_correct_head_dim_()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a42d154b3f93b07c41b514e468a61c803_icgraph.svg" width="100%" height="489"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ac4b913e2710929070b5b073b4b67b24c" name="ac4b913e2710929070b5b073b4b67b24c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4b913e2710929070b5b073b4b67b24c">&#9670;&#160;</a></span>tensor_map_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tensor_map_load </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load tensor_map.json from disk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path to tensor_map.json. </td></tr>
    <tr><td class="paramname">out</td><td>Output tensor map. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00484">484</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  484</span>                                                         {</div>
<div class="line"><span class="lineno">  485</span>  <span class="keywordflow">if</span> (!path || !out) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  486</span>  memset(out, 0, <span class="keyword">sizeof</span>(*out));</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>  <span class="keywordtype">char</span> *json = NULL;</div>
<div class="line"><span class="lineno">  489</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a9ab7221db47755779150a9cc3c374b8f">read_file</a>(path, &amp;json) != 0) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(json);</div>
<div class="line"><span class="lineno">  492</span>  <span class="keywordflow">if</span> (!*p) { free(json); <span class="keywordflow">return</span> -1; }</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>  <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *arr = NULL;</div>
<div class="line"><span class="lineno">  495</span>  uint32_t count = 0;</div>
<div class="line"><span class="lineno">  496</span>  uint32_t cap = 0;</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>  <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;[&#39;</span>) {</div>
<div class="line"><span class="lineno">  499</span>    ++p;</div>
<div class="line"><span class="lineno">  500</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  501</span>      p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  502</span>      <span class="keywordflow">if</span> (!*p) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  503</span>      <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;]&#39;</span>) { ++p; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>      <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;{&#39;</span>) { p = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(p); <span class="keywordflow">if</span> (!p) <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  506</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  507</span>        <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> td;</div>
<div class="line"><span class="lineno">  508</span>        <span class="keywordtype">int</span> ok = 0;</div>
<div class="line"><span class="lineno">  509</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a180580870bc40b8b36b78f81a1c26178">parse_tensor_object</a>(p, NULL, &amp;td, &amp;ok);</div>
<div class="line"><span class="lineno">  510</span>        <span class="keywordflow">if</span> (!q || !ok) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  511</span>        p = q;</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a87fc763c39a4a64f091406e88b1c640e">push_tensor</a>(&amp;arr, &amp;count, &amp;cap, &amp;td) != 0) {</div>
<div class="line"><span class="lineno">  514</span>          <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(&amp;td);</div>
<div class="line"><span class="lineno">  515</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  516</span>        }</div>
<div class="line"><span class="lineno">  517</span>      }</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>      p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  520</span>      <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) { ++p; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  521</span>      <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;]&#39;</span>) { ++p; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  522</span>    }</div>
<div class="line"><span class="lineno">  523</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;{&#39;</span>) {</div>
<div class="line"><span class="lineno">  524</span>    ++p;</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordtype">int</span> found_tensors_array = 0;</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *scan = p;</div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordflow">while</span> (*scan) {</div>
<div class="line"><span class="lineno">  530</span>      scan = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(scan);</div>
<div class="line"><span class="lineno">  531</span>      <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;}&#39;</span>) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  532</span>      <span class="keywordflow">if</span> (*scan != <span class="charliteral">&#39;&quot;&#39;</span>) { ++scan; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>      <span class="keywordtype">char</span> *key = NULL;</div>
<div class="line"><span class="lineno">  535</span>      <span class="keyword">const</span> <span class="keywordtype">char</span> *qk = <a class="code hl_function" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a>(scan, &amp;key);</div>
<div class="line"><span class="lineno">  536</span>      <span class="keywordflow">if</span> (!qk) { free(key); <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  537</span>      scan = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(qk);</div>
<div class="line"><span class="lineno">  538</span>      <span class="keywordflow">if</span> (*scan != <span class="charliteral">&#39;:&#39;</span>) { free(key); <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  539</span>      ++scan;</div>
<div class="line"><span class="lineno">  540</span>      scan = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(scan);</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>      <span class="keywordflow">if</span> (key &amp;&amp; strcmp(key, <span class="stringliteral">&quot;tensors&quot;</span>) == 0 &amp;&amp; *scan == <span class="charliteral">&#39;[&#39;</span>) {</div>
<div class="line"><span class="lineno">  543</span>        found_tensors_array = 1;</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>        ++scan;</div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  547</span>          scan = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(scan);</div>
<div class="line"><span class="lineno">  548</span>          <span class="keywordflow">if</span> (!*scan) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  549</span>          <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;]&#39;</span>) { ++scan; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>          <span class="keywordflow">if</span> (*scan != <span class="charliteral">&#39;{&#39;</span>) {</div>
<div class="line"><span class="lineno">  552</span>            scan = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(scan);</div>
<div class="line"><span class="lineno">  553</span>            <span class="keywordflow">if</span> (!scan) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  554</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  555</span>            <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> td;</div>
<div class="line"><span class="lineno">  556</span>            <span class="keywordtype">int</span> ok = 0;</div>
<div class="line"><span class="lineno">  557</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *qt = <a class="code hl_function" href="tensor__map_8c.html#a180580870bc40b8b36b78f81a1c26178">parse_tensor_object</a>(scan, NULL, &amp;td, &amp;ok);</div>
<div class="line"><span class="lineno">  558</span>            <span class="keywordflow">if</span> (!qt || !ok) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  559</span>            scan = qt;</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a87fc763c39a4a64f091406e88b1c640e">push_tensor</a>(&amp;arr, &amp;count, &amp;cap, &amp;td) != 0) {</div>
<div class="line"><span class="lineno">  562</span>              <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(&amp;td);</div>
<div class="line"><span class="lineno">  563</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  564</span>            }</div>
<div class="line"><span class="lineno">  565</span>          }</div>
<div class="line"><span class="lineno">  566</span> </div>
<div class="line"><span class="lineno">  567</span>          scan = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(scan);</div>
<div class="line"><span class="lineno">  568</span>          <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;,&#39;</span>) { ++scan; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  569</span>          <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;]&#39;</span>) { ++scan; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  570</span>        }</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>        free(key);</div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  574</span>      }</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>      <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;{&#39;</span>) scan = <a class="code hl_function" href="tensor__map_8c.html#a9e5190012370782147588f3b3b6a4886">skip_object</a>(scan);</div>
<div class="line"><span class="lineno">  577</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;[&#39;</span>) scan = <a class="code hl_function" href="tensor__map_8c.html#a86c69aef66f60185ab7bfe466d7eb1d3">skip_array</a>(scan);</div>
<div class="line"><span class="lineno">  578</span>      <span class="keywordflow">else</span> scan = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(scan);</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>      free(key);</div>
<div class="line"><span class="lineno">  581</span>      <span class="keywordflow">if</span> (!scan) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>      scan = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(scan);</div>
<div class="line"><span class="lineno">  584</span>      <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;,&#39;</span>) ++scan;</div>
<div class="line"><span class="lineno">  585</span>    }</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>    <span class="keywordflow">if</span> (!found_tensors_array) {</div>
<div class="line"><span class="lineno">  588</span>      <span class="keywordflow">while</span> (*p) {</div>
<div class="line"><span class="lineno">  589</span>        p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  590</span>        <span class="keywordflow">if</span> (!*p) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  591</span>        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;}&#39;</span>) { ++p; <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  592</span>        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) { ++p; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  593</span>        <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;&quot;&#39;</span>) { p = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(p); <span class="keywordflow">if</span> (!p) <span class="keywordflow">break</span>; <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>        <span class="keywordtype">char</span> *name = NULL;</div>
<div class="line"><span class="lineno">  596</span>        p = <a class="code hl_function" href="tensor__map_8c.html#a3dae92b1c084251e956a5773e53869b5">parse_string</a>(p, &amp;name);</div>
<div class="line"><span class="lineno">  597</span>        <span class="keywordflow">if</span> (!p) { free(name); <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  598</span> </div>
<div class="line"><span class="lineno">  599</span>        p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  600</span>        <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;:&#39;</span>) { free(name); <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  601</span>        ++p;</div>
<div class="line"><span class="lineno">  602</span>        p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;{&#39;</span>) {</div>
<div class="line"><span class="lineno">  605</span>          <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> td;</div>
<div class="line"><span class="lineno">  606</span>          <span class="keywordtype">int</span> ok = 0;</div>
<div class="line"><span class="lineno">  607</span>          <span class="keyword">const</span> <span class="keywordtype">char</span> *q = <a class="code hl_function" href="tensor__map_8c.html#a180580870bc40b8b36b78f81a1c26178">parse_tensor_object</a>(p, name, &amp;td, &amp;ok);</div>
<div class="line"><span class="lineno">  608</span>          <span class="keywordflow">if</span> (!q || !ok) { free(name); <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  609</span>          p = q;</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8c.html#a87fc763c39a4a64f091406e88b1c640e">push_tensor</a>(&amp;arr, &amp;count, &amp;cap, &amp;td) != 0) {</div>
<div class="line"><span class="lineno">  612</span>            <a class="code hl_function" href="tensor__map_8c.html#aa6b53de7ce006a1a2877e2b19ad8ce24">tensor_desc_free</a>(&amp;td);</div>
<div class="line"><span class="lineno">  613</span>            free(name);</div>
<div class="line"><span class="lineno">  614</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  615</span>          }</div>
<div class="line"><span class="lineno">  616</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  617</span>          p = <a class="code hl_function" href="tensor__map_8c.html#a751de8ccde16854a65c185afdfecfdbf">skip_value</a>(p);</div>
<div class="line"><span class="lineno">  618</span>          free(name);</div>
<div class="line"><span class="lineno">  619</span>          <span class="keywordflow">if</span> (!p) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  620</span>        }</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span>        free(name);</div>
<div class="line"><span class="lineno">  623</span>        p = <a class="code hl_function" href="tensor__map_8c.html#ae19e0ad12742fe7fdff22f60436aadc7">skip_ws</a>(p);</div>
<div class="line"><span class="lineno">  624</span>        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) ++p;</div>
<div class="line"><span class="lineno">  625</span>      }</div>
<div class="line"><span class="lineno">  626</span>    }</div>
<div class="line"><span class="lineno">  627</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  628</span>    free(json);</div>
<div class="line"><span class="lineno">  629</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  630</span>  }</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>  free(json);</div>
<div class="line"><span class="lineno">  633</span> </div>
<div class="line"><span class="lineno">  634</span>  <span class="keywordflow">if</span> (!arr || count == 0u) {</div>
<div class="line"><span class="lineno">  635</span>    free(arr);</div>
<div class="line"><span class="lineno">  636</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  637</span>  }</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>  <span class="keywordflow">if</span> (cap &gt; count) {</div>
<div class="line"><span class="lineno">  640</span>    <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *na = (<a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *)realloc(arr, (<span class="keywordtype">size_t</span>)count * <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="tensor__map_8h.html#a1ed0f6ce08b1582103651d4fd14a30f1">tensor_desc_t</a>));</div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordflow">if</span> (na) arr = na;</div>
<div class="line"><span class="lineno">  642</span>  }</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>  <a class="code hl_variable" href="namespaceconvert__dtypes__to__numeric.html#a0332296ea5bde95f8e72005df06144a8">out</a>-&gt;tensors = arr;</div>
<div class="line"><span class="lineno">  645</span>  <a class="code hl_variable" href="namespaceconvert__dtypes__to__numeric.html#a0332296ea5bde95f8e72005df06144a8">out</a>-&gt;count = count;</div>
<div class="line"><span class="lineno">  646</span>  <a class="code hl_variable" href="namespaceconvert__dtypes__to__numeric.html#a0332296ea5bde95f8e72005df06144a8">out</a>-&gt;loaded = 1;</div>
<div class="line"><span class="lineno">  647</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  648</span>}</div>
<div class="ttc" id="atensor__map_8c_html_a180580870bc40b8b36b78f81a1c26178"><div class="ttname"><a href="tensor__map_8c.html#a180580870bc40b8b36b78f81a1c26178">parse_tensor_object</a></div><div class="ttdeci">static const char * parse_tensor_object(const char *p, const char *map_style_name, tensor_desc_t *td, int *out_ok)</div><div class="ttdoc">Parse a tensor descriptor object.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00397">tensor_map.c:397</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a87fc763c39a4a64f091406e88b1c640e"><div class="ttname"><a href="tensor__map_8c.html#a87fc763c39a4a64f091406e88b1c640e">push_tensor</a></div><div class="ttdeci">static int push_tensor(tensor_desc_t **arr, uint32_t *count, uint32_t *cap, const tensor_desc_t *src)</div><div class="ttdoc">Append a tensor descriptor to a growable array.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00318">tensor_map.c:318</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a9ab7221db47755779150a9cc3c374b8f"><div class="ttname"><a href="tensor__map_8c.html#a9ab7221db47755779150a9cc3c374b8f">read_file</a></div><div class="ttdeci">static int read_file(const char *path, char **out)</div><div class="ttdoc">Read an entire file into a NUL-terminated buffer.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00035">tensor_map.c:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00072">parse_string()</a>, <a class="el" href="tensor__map_8c_source.html#l00397">parse_tensor_object()</a>, <a class="el" href="tensor__map_8c_source.html#l00318">push_tensor()</a>, <a class="el" href="tensor__map_8c_source.html#l00035">read_file()</a>, <a class="el" href="tensor__map_8c_source.html#l00137">skip_array()</a>, <a class="el" href="tensor__map_8c_source.html#l00158">skip_object()</a>, <a class="el" href="tensor__map_8c_source.html#l00191">skip_value()</a>, <a class="el" href="tensor__map_8c_source.html#l00024">skip_ws()</a>, and <a class="el" href="tensor__map_8c_source.html#l00303">tensor_desc_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gptoss__weights__index_8c_source.html#l00417">gptoss_weights_index_open()</a>, <a class="el" href="infer__gptoss_8c_source.html#l01700">ie_gptoss_infer_create()</a>, and <a class="el" href="ie__api_8c_source.html#l00275">maybe_correct_head_dim_()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_ac4b913e2710929070b5b073b4b67b24c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_ac4b913e2710929070b5b073b4b67b24c_icgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad5a6d86e99a96405eb2d6daf95603691" name="ad5a6d86e99a96405eb2d6daf95603691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5a6d86e99a96405eb2d6daf95603691">&#9670;&#160;</a></span>tensor_map_validate_against_bin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tensor_map_validate_against_bin </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="tensor__map_8h.html#a0ae1dced25c800bf85537db1ce9776a7">tensor_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bin_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>errsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validate a loaded tensor map against a mapped weights binary. </p>
<p>This is a hard consistency check intended to catch stale/mismatched tensor_map.json versus model.ie.bin before any inference occurs. It validates:</p><ul>
<li>name is present</li>
<li>size_bytes is non-zero</li>
<li>offset + size_bytes fits within bin_size</li>
<li>no overlaps (after sorting by offset)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Loaded tensor map. </td></tr>
    <tr><td class="paramname">bin_size</td><td>Size in bytes of the mapped weights file. </td></tr>
    <tr><td class="paramname">err</td><td>Optional error buffer for a human-readable error message. </td></tr>
    <tr><td class="paramname">errsz</td><td>Size of err buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if valid, non-zero if invalid. </dd></dl>

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00696">696</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  696</span>                                                                                                       {</div>
<div class="line"><span class="lineno">  697</span>  <span class="keywordflow">if</span> (!map || !map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#acb71d934b0da86d92eb41c1992756bfd">loaded</a> || !map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a> || map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">count</a> == 0u) {</div>
<div class="line"><span class="lineno">  698</span>    <a class="code hl_function" href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a>(err, errsz, <span class="stringliteral">&quot;tensor_map not loaded&quot;</span>);</div>
<div class="line"><span class="lineno">  699</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  700</span>  }</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>  <a class="code hl_struct" href="structtm__sort__ref__s.html">tm_sort_ref_t</a> *refs = (<a class="code hl_struct" href="structtm__sort__ref__s.html">tm_sort_ref_t</a> *)malloc((<span class="keywordtype">size_t</span>)map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">count</a> * <span class="keyword">sizeof</span>(*refs));</div>
<div class="line"><span class="lineno">  703</span>  <span class="keywordflow">if</span> (!refs) {</div>
<div class="line"><span class="lineno">  704</span>    <a class="code hl_function" href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a>(err, errsz, <span class="stringliteral">&quot;OOM allocating validation refs&quot;</span>);</div>
<div class="line"><span class="lineno">  705</span>    <span class="keywordflow">return</span> -2;</div>
<div class="line"><span class="lineno">  706</span>  }</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">count</a>; ++i) {</div>
<div class="line"><span class="lineno">  709</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *td = &amp;map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[i];</div>
<div class="line"><span class="lineno">  710</span> </div>
<div class="line"><span class="lineno">  711</span>    <span class="keywordflow">if</span> (!td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a> || td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a1134b2dbce500003f3b011f3e8a3d090">name</a>[0] == <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><span class="lineno">  712</span>      <a class="code hl_function" href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a>(err, errsz, <span class="stringliteral">&quot;tensor_map contains entry with empty name&quot;</span>);</div>
<div class="line"><span class="lineno">  713</span>      free(refs);</div>
<div class="line"><span class="lineno">  714</span>      <span class="keywordflow">return</span> -3;</div>
<div class="line"><span class="lineno">  715</span>    }</div>
<div class="line"><span class="lineno">  716</span>    <span class="keywordflow">if</span> (td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a151674f0f1ad60320437f028593d8b26">size_bytes</a> == 0u) {</div>
<div class="line"><span class="lineno">  717</span>      <span class="keywordtype">char</span> buf[256];</div>
<div class="line"><span class="lineno">  718</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8h.html#ad887f000c7ecd66c30fb2d5cad14376d">tensor_desc_to_string</a>(td, buf, <span class="keyword">sizeof</span>(buf)) &gt;= 0) {</div>
<div class="line"><span class="lineno">  719</span>        (void)snprintf(err, errsz, <span class="stringliteral">&quot;tensor_map contains zero-sized tensor: %s&quot;</span>, buf);</div>
<div class="line"><span class="lineno">  720</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  721</span>        <a class="code hl_function" href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a>(err, errsz, <span class="stringliteral">&quot;tensor_map contains zero-sized tensor&quot;</span>);</div>
<div class="line"><span class="lineno">  722</span>      }</div>
<div class="line"><span class="lineno">  723</span>      free(refs);</div>
<div class="line"><span class="lineno">  724</span>      <span class="keywordflow">return</span> -4;</div>
<div class="line"><span class="lineno">  725</span>    }</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>    <span class="keyword">const</span> uint64_t end = td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a0abe393a370bda31eda8ab11a5f8df37">offset</a> + td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a151674f0f1ad60320437f028593d8b26">size_bytes</a>;</div>
<div class="line"><span class="lineno">  728</span>    <span class="keywordflow">if</span> (end &lt; td-&gt;offset) {</div>
<div class="line"><span class="lineno">  729</span>      <a class="code hl_function" href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a>(err, errsz, <span class="stringliteral">&quot;tensor_map offset+size overflow&quot;</span>);</div>
<div class="line"><span class="lineno">  730</span>      free(refs);</div>
<div class="line"><span class="lineno">  731</span>      <span class="keywordflow">return</span> -5;</div>
<div class="line"><span class="lineno">  732</span>    }</div>
<div class="line"><span class="lineno">  733</span>    <span class="keywordflow">if</span> (end &gt; (uint64_t)bin_size) {</div>
<div class="line"><span class="lineno">  734</span>      <span class="keywordtype">char</span> buf[256];</div>
<div class="line"><span class="lineno">  735</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="tensor__map_8h.html#ad887f000c7ecd66c30fb2d5cad14376d">tensor_desc_to_string</a>(td, buf, <span class="keyword">sizeof</span>(buf)) &gt;= 0) {</div>
<div class="line"><span class="lineno">  736</span>        (void)snprintf(err, errsz,</div>
<div class="line"><span class="lineno">  737</span>                       <span class="stringliteral">&quot;tensor_map entry out of bounds: bin_size=%llu %s&quot;</span>,</div>
<div class="line"><span class="lineno">  738</span>                       (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)bin_size, buf);</div>
<div class="line"><span class="lineno">  739</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  740</span>        <a class="code hl_function" href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a>(err, errsz, <span class="stringliteral">&quot;tensor_map entry out of bounds&quot;</span>);</div>
<div class="line"><span class="lineno">  741</span>      }</div>
<div class="line"><span class="lineno">  742</span>      free(refs);</div>
<div class="line"><span class="lineno">  743</span>      <span class="keywordflow">return</span> -6;</div>
<div class="line"><span class="lineno">  744</span>    }</div>
<div class="line"><span class="lineno">  745</span> </div>
<div class="line"><span class="lineno">  746</span>    refs[i].<a class="code hl_variable" href="structtm__sort__ref__s.html#afaf93178be657b3090952279c97fc940">off</a> = td-&gt;<a class="code hl_variable" href="structtensor__desc__s.html#a0abe393a370bda31eda8ab11a5f8df37">offset</a>;</div>
<div class="line"><span class="lineno">  747</span>    refs[i].<a class="code hl_variable" href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">end</a> = end;</div>
<div class="line"><span class="lineno">  748</span>    refs[i].<a class="code hl_variable" href="structtm__sort__ref__s.html#ac6b00de37e50d2f99e6935ba63dd5611">idx</a> = i;</div>
<div class="line"><span class="lineno">  749</span>  }</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>  qsort(refs, (<span class="keywordtype">size_t</span>)map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">count</a>, <span class="keyword">sizeof</span>(*refs), <a class="code hl_function" href="tensor__map_8c.html#a9dc54e5679c0402d5d812603754287a8">tm_sort_ref_cmp</a>);</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>  uint64_t prev_end = refs[0].<a class="code hl_variable" href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">end</a>;</div>
<div class="line"><span class="lineno">  754</span>  <span class="keywordflow">for</span> (uint32_t k = 1; k &lt; map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a64c31242ffe43f6fc36b465d1ef75462">count</a>; ++k) {</div>
<div class="line"><span class="lineno">  755</span>    <span class="keywordflow">if</span> (refs[k].off &lt; prev_end) {</div>
<div class="line"><span class="lineno">  756</span>      <span class="keyword">const</span> <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *A = &amp;map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[refs[k - 1].<a class="code hl_variable" href="structtm__sort__ref__s.html#ac6b00de37e50d2f99e6935ba63dd5611">idx</a>];</div>
<div class="line"><span class="lineno">  757</span>      <span class="keyword">const</span> <a class="code hl_struct" href="structtensor__desc__s.html">tensor_desc_t</a> *B = &amp;map-&gt;<a class="code hl_variable" href="structtensor__map__s.html#a30493d1f3d1e66d1e9de6813c2844293">tensors</a>[refs[k].<a class="code hl_variable" href="structtm__sort__ref__s.html#ac6b00de37e50d2f99e6935ba63dd5611">idx</a>];</div>
<div class="line"><span class="lineno">  758</span> </div>
<div class="line"><span class="lineno">  759</span>      <span class="keywordtype">char</span> a_buf[256], b_buf[256];</div>
<div class="line"><span class="lineno">  760</span>      (void)<a class="code hl_function" href="tensor__map_8h.html#ad887f000c7ecd66c30fb2d5cad14376d">tensor_desc_to_string</a>(A, a_buf, <span class="keyword">sizeof</span>(a_buf));</div>
<div class="line"><span class="lineno">  761</span>      (void)<a class="code hl_function" href="tensor__map_8h.html#ad887f000c7ecd66c30fb2d5cad14376d">tensor_desc_to_string</a>(B, b_buf, <span class="keyword">sizeof</span>(b_buf));</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>      (void)snprintf(err, errsz,</div>
<div class="line"><span class="lineno">  764</span>                     <span class="stringliteral">&quot;tensor_map overlap detected:\n  A: %s\n  B: %s&quot;</span>,</div>
<div class="line"><span class="lineno">  765</span>                     a_buf, b_buf);</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>      free(refs);</div>
<div class="line"><span class="lineno">  768</span>      <span class="keywordflow">return</span> -7;</div>
<div class="line"><span class="lineno">  769</span>    }</div>
<div class="line"><span class="lineno">  770</span>    prev_end = refs[k].<a class="code hl_variable" href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">end</a>;</div>
<div class="line"><span class="lineno">  771</span>  }</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>  free(refs);</div>
<div class="line"><span class="lineno">  774</span>  <span class="keywordflow">if</span> (err &amp;&amp; errsz) err[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  775</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  776</span>}</div>
<div class="ttc" id="astructtm__sort__ref__s_html"><div class="ttname"><a href="structtm__sort__ref__s.html">tm_sort_ref_s</a></div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00675">tensor_map.c:675</a></div></div>
<div class="ttc" id="astructtm__sort__ref__s_html_a4f38ae166a16e951094d4bdc51c630a9"><div class="ttname"><a href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">tm_sort_ref_s::end</a></div><div class="ttdeci">uint64_t end</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00677">tensor_map.c:677</a></div></div>
<div class="ttc" id="astructtm__sort__ref__s_html_ac6b00de37e50d2f99e6935ba63dd5611"><div class="ttname"><a href="structtm__sort__ref__s.html#ac6b00de37e50d2f99e6935ba63dd5611">tm_sort_ref_s::idx</a></div><div class="ttdeci">uint32_t idx</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00678">tensor_map.c:678</a></div></div>
<div class="ttc" id="astructtm__sort__ref__s_html_afaf93178be657b3090952279c97fc940"><div class="ttname"><a href="structtm__sort__ref__s.html#afaf93178be657b3090952279c97fc940">tm_sort_ref_s::off</a></div><div class="ttdeci">uint64_t off</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00676">tensor_map.c:676</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a545cca475e7c6de327d07da7515a67d1"><div class="ttname"><a href="tensor__map_8c.html#a545cca475e7c6de327d07da7515a67d1">tm_set_err</a></div><div class="ttdeci">static void tm_set_err(char *err, size_t errsz, const char *msg)</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00691">tensor_map.c:691</a></div></div>
<div class="ttc" id="atensor__map_8c_html_a9dc54e5679c0402d5d812603754287a8"><div class="ttname"><a href="tensor__map_8c.html#a9dc54e5679c0402d5d812603754287a8">tm_sort_ref_cmp</a></div><div class="ttdeci">static int tm_sort_ref_cmp(const void *a, const void *b)</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8c_source.html#l00681">tensor_map.c:681</a></div></div>
<div class="ttc" id="atensor__map_8h_html_ad887f000c7ecd66c30fb2d5cad14376d"><div class="ttname"><a href="tensor__map_8h.html#ad887f000c7ecd66c30fb2d5cad14376d">tensor_desc_to_string</a></div><div class="ttdeci">static int tensor_desc_to_string(const tensor_desc_t *td, char *out, size_t outsz)</div><div class="ttdoc">Format a tensor descriptor into a compact debug string.</div><div class="ttdef"><b>Definition</b> <a href="tensor__map_8h_source.html#l00189">tensor_map.h:189</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8h_source.html#l00122">tensor_map_s::count</a>, <a class="el" href="tensor__map_8c_source.html#l00677">tm_sort_ref_s::end</a>, <a class="el" href="tensor__map_8c_source.html#l00678">tm_sort_ref_s::idx</a>, <a class="el" href="tensor__map_8h_source.html#l00124">tensor_map_s::loaded</a>, <a class="el" href="tensor__map_8h_source.html#l00094">tensor_desc_s::name</a>, <a class="el" href="tensor__map_8c_source.html#l00676">tm_sort_ref_s::off</a>, <a class="el" href="tensor__map_8h_source.html#l00096">tensor_desc_s::offset</a>, <a class="el" href="tensor__map_8h_source.html#l00098">tensor_desc_s::size_bytes</a>, <a class="el" href="tensor__map_8h_source.html#l00189">tensor_desc_to_string()</a>, <a class="el" href="tensor__map_8h_source.html#l00120">tensor_map_s::tensors</a>, <a class="el" href="tensor__map_8c_source.html#l00691">tm_set_err()</a>, and <a class="el" href="tensor__map_8c_source.html#l00681">tm_sort_ref_cmp()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_ad5a6d86e99a96405eb2d6daf95603691_cgraph.svg" width="603" height="159"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a545cca475e7c6de327d07da7515a67d1" name="a545cca475e7c6de327d07da7515a67d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545cca475e7c6de327d07da7515a67d1">&#9670;&#160;</a></span>tm_set_err()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tm_set_err </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>errsz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00691">691</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  691</span>                                                                 {</div>
<div class="line"><span class="lineno">  692</span>  <span class="keywordflow">if</span> (!err || errsz == 0u) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  693</span>  (void)snprintf(err, errsz, <span class="stringliteral">&quot;%s&quot;</span>, msg ? msg : <span class="stringliteral">&quot;unknown error&quot;</span>);</div>
<div class="line"><span class="lineno">  694</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00696">tensor_map_validate_against_bin()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a545cca475e7c6de327d07da7515a67d1_icgraph.svg" width="310" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9dc54e5679c0402d5d812603754287a8" name="a9dc54e5679c0402d5d812603754287a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dc54e5679c0402d5d812603754287a8">&#9670;&#160;</a></span>tm_sort_ref_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tm_sort_ref_cmp </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tensor__map_8c_source.html#l00681">681</a> of file <a class="el" href="tensor__map_8c_source.html">tensor_map.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  681</span>                                                         {</div>
<div class="line"><span class="lineno">  682</span>  <span class="keyword">const</span> <a class="code hl_struct" href="structtm__sort__ref__s.html">tm_sort_ref_t</a> *A = (<span class="keyword">const</span> <a class="code hl_struct" href="structtm__sort__ref__s.html">tm_sort_ref_t</a> *)a;</div>
<div class="line"><span class="lineno">  683</span>  <span class="keyword">const</span> <a class="code hl_struct" href="structtm__sort__ref__s.html">tm_sort_ref_t</a> *B = (<span class="keyword">const</span> <a class="code hl_struct" href="structtm__sort__ref__s.html">tm_sort_ref_t</a> *)b;</div>
<div class="line"><span class="lineno">  684</span>  <span class="keywordflow">if</span> (A-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#afaf93178be657b3090952279c97fc940">off</a> &lt; B-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#afaf93178be657b3090952279c97fc940">off</a>) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  685</span>  <span class="keywordflow">if</span> (A-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#afaf93178be657b3090952279c97fc940">off</a> &gt; B-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#afaf93178be657b3090952279c97fc940">off</a>) <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  686</span>  <span class="keywordflow">if</span> (A-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">end</a> &lt; B-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">end</a>) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  687</span>  <span class="keywordflow">if</span> (A-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">end</a> &gt; B-&gt;<a class="code hl_variable" href="structtm__sort__ref__s.html#a4f38ae166a16e951094d4bdc51c630a9">end</a>) <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  688</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  689</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="tensor__map_8c_source.html#l00677">tm_sort_ref_s::end</a>, and <a class="el" href="tensor__map_8c_source.html#l00676">tm_sort_ref_s::off</a>.</p>

<p class="reference">Referenced by <a class="el" href="tensor__map_8c_source.html#l00696">tensor_map_validate_against_bin()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="tensor__map_8c_a9dc54e5679c0402d5d812603754287a8_icgraph.svg" width="350" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_996f45160da62e1a3d7f6046fad68f51.html">engine</a></li><li class="navelem"><a class="el" href="dir_3d9126aa00c041bc0b8f859d1965a0f4.html">src</a></li><li class="navelem"><a class="el" href="dir_ca1f0cd6417c875f36bda237f81fbbd7.html">io</a></li><li class="navelem"><a class="el" href="tensor__map_8c.html">tensor_map.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
