<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: test_partial_teardown Pages: 1 -->
<svg width="515pt" height="193pt"
 viewBox="0.00 0.00 515.00 193.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 189)">
<title>test_partial_teardown</title>
<!-- Node1 -->
<g id="Node000001" class="node">
<title>Node1</title>
<g id="a_Node000001"><a xlink:title="Validate graceful teardown: destroy after partial consumption.">
<polygon fill="#999999" stroke="#666666" points="123,-74 0,-74 0,-55 123,-55 123,-74"/>
<text text-anchor="middle" x="61.5" y="-62" font-family="Helvetica,sans-Serif" font-size="10.00">test_partial_teardown</text>
</a>
</g>
</g>
<!-- Node2 -->
<g id="Node000002" class="node">
<title>Node2</title>
<g id="a_Node000002"><a xlink:href="ie__batcher_8c.html#ab201d312c4f0fa59e31e99e221bd71f6" target="_top" xlink:title="Create a new asynchronous tokenizer batcher.">
<polygon fill="white" stroke="#666666" points="266,-130 162,-130 162,-111 266,-111 266,-130"/>
<text text-anchor="middle" x="214" y="-118" font-family="Helvetica,sans-Serif" font-size="10.00">ie_batcher_create</text>
</a>
</g>
</g>
<!-- Node1&#45;&gt;Node2 -->
<g id="edge1_Node000001_Node000002" class="edge">
<title>Node1&#45;&gt;Node2</title>
<g id="a_edge1_Node000001_Node000002"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M87.02,-74.12C106.48,-81.7 134.41,-92.46 159,-101.5 164.5,-103.52 170.33,-105.62 176.04,-107.65"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="174.88,-110.95 185.48,-110.98 177.21,-104.35 174.88,-110.95"/>
</a>
</g>
</g>
<!-- Node7 -->
<g id="Node000007" class="node">
<title>Node7</title>
<g id="a_Node000007"><a xlink:href="ie__batcher_8c.html#a606dcb56c138607d9b0d77948d8b48b9" target="_top" xlink:title="Destroy a batcher, joining workers and freeing all resources.">
<polygon fill="white" stroke="#666666" points="269,-93 159,-93 159,-74 269,-74 269,-93"/>
<text text-anchor="middle" x="214" y="-81" font-family="Helvetica,sans-Serif" font-size="10.00">ie_batcher_destroy</text>
</a>
</g>
</g>
<!-- Node1&#45;&gt;Node7 -->
<g id="edge6_Node000001_Node000007" class="edge">
<title>Node1&#45;&gt;Node7</title>
<g id="a_edge6_Node000001_Node000007"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M123.28,-72.17C131.63,-73.23 140.23,-74.31 148.64,-75.38"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="148.43,-78.88 158.79,-76.66 149.3,-71.93 148.43,-78.88"/>
</a>
</g>
</g>
<!-- Node9 -->
<g id="Node000009" class="node">
<title>Node9</title>
<g id="a_Node000009"><a xlink:href="ie__batcher_8c.html#a6dfb3b0fad4a7c1271d86da06649236f" target="_top" xlink:title="Obtain a contiguous slice of ready items without copying.">
<polygon fill="white" stroke="#666666" points="258.5,-56 169.5,-56 169.5,-37 258.5,-37 258.5,-56"/>
<text text-anchor="middle" x="214" y="-44" font-family="Helvetica,sans-Serif" font-size="10.00">ie_batcher_get</text>
</a>
</g>
</g>
<!-- Node1&#45;&gt;Node9 -->
<g id="edge8_Node000001_Node000009" class="edge">
<title>Node1&#45;&gt;Node9</title>
<g id="a_edge8_Node000001_Node000009"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M123.28,-57.23C135.14,-55.81 147.5,-54.33 159.12,-52.94"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="159.6,-56.41 169.11,-51.75 158.77,-49.46 159.6,-56.41"/>
</a>
</g>
</g>
<!-- Node10 -->
<g id="Node000010" class="node">
<title>Node10</title>
<g id="a_Node000010"><a xlink:href="test__batcher_8c.html#a4818ddbc1b516bbe63d2a991a2b1b4bd" target="_top" xlink:title="Deterministic tokenizer used for testing.">
<polygon fill="white" stroke="#666666" points="263,-19 165,-19 165,0 263,0 263,-19"/>
<text text-anchor="middle" x="214" y="-7" font-family="Helvetica,sans-Serif" font-size="10.00">test_tokenize_cb</text>
</a>
</g>
</g>
<!-- Node1&#45;&gt;Node10 -->
<g id="edge9_Node000001_Node000010" class="edge">
<title>Node1&#45;&gt;Node10</title>
<g id="a_edge9_Node000001_Node000010"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M86.58,-54.93C106.04,-47.27 134.17,-36.39 159,-27.5 163.82,-25.77 168.9,-24.01 173.94,-22.29"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="175.13,-25.58 183.49,-19.07 172.9,-18.95 175.13,-25.58"/>
</a>
</g>
</g>
<!-- Node3 -->
<g id="Node000003" class="node">
<title>Node3</title>
<g id="a_Node000003"><a xlink:href="ie__batcher_8c.html#ab50c928126740940413626fd7ab7ce72" target="_top" xlink:title="Producer thread entry: tokenizes prompts in ascending index order.">
<polygon fill="white" stroke="#666666" points="385,-167 305,-167 305,-148 385,-148 385,-167"/>
<text text-anchor="middle" x="345" y="-155" font-family="Helvetica,sans-Serif" font-size="10.00">worker_main</text>
</a>
</g>
</g>
<!-- Node2&#45;&gt;Node3 -->
<g id="edge2_Node000002_Node000003" class="edge">
<title>Node2&#45;&gt;Node3</title>
<g id="a_edge2_Node000002_Node000003"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M248.22,-130.03C264.2,-134.61 283.55,-140.16 300.67,-145.07"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="299.87,-148.48 310.44,-147.88 301.8,-141.75 299.87,-148.48"/>
</a>
</g>
</g>
<!-- Node6 -->
<g id="Node000006" class="node">
<title>Node6</title>
<g id="a_Node000006"><a xlink:href="ie__batcher_8c.html#a981c4f4b5894b549eb0b2f0358810c67" target="_top" xlink:title="calloc wrapper (zero&#45;initialized).">
<polygon fill="white" stroke="#666666" points="370.5,-130 319.5,-130 319.5,-111 370.5,-111 370.5,-130"/>
<text text-anchor="middle" x="345" y="-118" font-family="Helvetica,sans-Serif" font-size="10.00">xcalloc</text>
</a>
</g>
</g>
<!-- Node2&#45;&gt;Node6 -->
<g id="edge5_Node000002_Node000006" class="edge">
<title>Node2&#45;&gt;Node6</title>
<g id="a_edge5_Node000002_Node000006"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M266.35,-120.5C280.77,-120.5 296.1,-120.5 309.3,-120.5"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="309.36,-124 319.36,-120.5 309.36,-117 309.36,-124"/>
</a>
</g>
</g>
<!-- Node4 -->
<g id="Node000004" class="node">
<title>Node4</title>
<g id="a_Node000004"><a xlink:href="ie__batcher_8c.html#a9475e6883ae67815581f9573b97d2148" target="_top" xlink:title="Enqueue a tokenized item into the ring (blocks if full).">
<polygon fill="white" stroke="#666666" points="507,-185 421,-185 421,-166 507,-166 507,-185"/>
<text text-anchor="middle" x="464" y="-173" font-family="Helvetica,sans-Serif" font-size="10.00">enqueue_item</text>
</a>
</g>
</g>
<!-- Node3&#45;&gt;Node4 -->
<g id="edge3_Node000003_Node000004" class="edge">
<title>Node3&#45;&gt;Node4</title>
<g id="a_edge3_Node000003_Node000004"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M385.28,-163.54C393.49,-164.81 402.27,-166.16 410.86,-167.48"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="410.39,-170.95 420.81,-169.01 411.46,-164.03 410.39,-170.95"/>
</a>
</g>
</g>
<!-- Node5 -->
<g id="Node000005" class="node">
<title>Node5</title>
<g id="a_Node000005"><a xlink:href="ie__batcher_8c.html#a691ff39201d7e90e9808bf7f5ddb2cb8" target="_top" xlink:title="Thread&#45;safe fetch of the next prompt index to process.">
<polygon fill="white" stroke="#666666" points="495,-148 433,-148 433,-129 495,-129 495,-148"/>
<text text-anchor="middle" x="464" y="-136" font-family="Helvetica,sans-Serif" font-size="10.00">pop_next</text>
</a>
</g>
</g>
<!-- Node3&#45;&gt;Node5 -->
<g id="edge4_Node000003_Node000005" class="edge">
<title>Node3&#45;&gt;Node5</title>
<g id="a_edge4_Node000003_Node000005"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M385.28,-151.12C397.42,-149.15 410.8,-146.98 422.98,-145"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="423.58,-148.45 432.89,-143.39 422.45,-141.54 423.58,-148.45"/>
</a>
</g>
</g>
<!-- Node8 -->
<g id="Node000008" class="node">
<title>Node8</title>
<g id="a_Node000008"><a xlink:href="ie__batcher_8c.html#a6b929aafa08b7ff2b55984965517f8cc" target="_top" xlink:title="Free an item&#39;s payload (token ids) and reset its fields.">
<polygon fill="white" stroke="#666666" points="379,-93 311,-93 311,-74 379,-74 379,-93"/>
<text text-anchor="middle" x="345" y="-81" font-family="Helvetica,sans-Serif" font-size="10.00">clear_item</text>
</a>
</g>
</g>
<!-- Node7&#45;&gt;Node8 -->
<g id="edge7_Node000007_Node000008" class="edge">
<title>Node7&#45;&gt;Node8</title>
<g id="a_edge7_Node000007_Node000008"><a xlink:title=" ">
<path fill="none" stroke="#63b8ff" d="M269.33,-83.5C279.76,-83.5 290.55,-83.5 300.57,-83.5"/>
<polygon fill="#63b8ff" stroke="#63b8ff" points="300.7,-87 310.7,-83.5 300.7,-80 300.7,-87"/>
</a>
</g>
</g>
</g>
</svg>
