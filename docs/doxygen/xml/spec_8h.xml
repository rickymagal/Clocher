<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="spec_8h" kind="file" language="C++">
    <compoundname>spec.h</compoundname>
    <includes local="no">stdint.h</includes>
    <includes local="no">stddef.h</includes>
    <includedby refid="spec_8c" local="yes">engine/src/dedup/spec.c</includedby>
    <includedby refid="dedup__extract_8c" local="yes">tools/dedup_extract.c</includedby>
    <incdepgraph>
      <node id="1">
        <label>engine/include/spec.h</label>
        <link refid="spec_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>stddef.h</label>
      </node>
      <node id="2">
        <label>stdint.h</label>
      </node>
    </incdepgraph>
    <invincdepgraph>
      <node id="1">
        <label>engine/include/spec.h</label>
        <link refid="spec_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>engine/src/dedup/spec.c</label>
        <link refid="spec_8c"/>
      </node>
      <node id="3">
        <label>tools/dedup_extract.c</label>
        <link refid="dedup__extract_8c"/>
      </node>
    </invincdepgraph>
    <innerclass refid="structdedup__spec__header__s" prot="public">dedup_spec_header_s</innerclass>
    <innerclass refid="structdedup__spec__entry__s" prot="public">dedup_spec_entry_s</innerclass>
    <sectiondef kind="define">
      <memberdef kind="define" id="spec_8h_1a79fa3ff7f9dac8e3d361925422c820aa" prot="public" static="no">
        <name>DEDUP_SPEC_VERSION</name>
        <initializer>1u</initializer>
        <briefdescription>
<para>Current on-disk spec version. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="37" column="9" bodyfile="engine/include/spec.h" bodystart="37" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1a23a00336f89211fb8137d3ae9ab34244" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC0</name>
        <initializer>0x44u /* &apos;D&apos; */</initializer>
        <briefdescription>
<para>File magic for dedup spec (&quot;DEDSPEC\0&quot;). </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="40" column="9" bodyfile="engine/include/spec.h" bodystart="40" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1af06299e637cba0228949a1999d887f62" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC1</name>
        <initializer>0x45u /* &apos;E&apos; */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="41" column="9" bodyfile="engine/include/spec.h" bodystart="41" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1a310826db0092ac4d679b6e4589c9cb54" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC2</name>
        <initializer>0x44u /* &apos;D&apos; */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="42" column="9" bodyfile="engine/include/spec.h" bodystart="42" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1affd9260ef14e41ec7d66fbc805fceba2" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC3</name>
        <initializer>0x53u /* &apos;S&apos; */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="43" column="9" bodyfile="engine/include/spec.h" bodystart="43" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1a8972c28ecbc809aaf37f5f8f9f7b3710" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC4</name>
        <initializer>0x50u /* &apos;P&apos; */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="44" column="9" bodyfile="engine/include/spec.h" bodystart="44" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1a68c8a2ab095696f73243975fdb752927" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC5</name>
        <initializer>0x45u /* &apos;E&apos; */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="45" column="9" bodyfile="engine/include/spec.h" bodystart="45" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1a19f9163e9753c34cfd321bfb32cbdc35" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC6</name>
        <initializer>0x43u /* &apos;C&apos; */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="46" column="9" bodyfile="engine/include/spec.h" bodystart="46" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="spec_8h_1a498f47d573a31462f279ad13cc3f4bb0" prot="public" static="no">
        <name>DEDUP_SPEC_MAGIC7</name>
        <initializer>0x00u /* &apos;\0&apos; */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="47" column="9" bodyfile="engine/include/spec.h" bodystart="47" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="enum">
      <memberdef kind="enum" id="spec_8h_1a992adb461488c98fc376295507cce753" prot="public" static="no" strong="no">
        <type></type>
        <name>dedup_payload_kind_e</name>
        <enumvalue id="spec_8h_1a992adb461488c98fc376295507cce753a82ec592a7b60f9a3840338b6d0d8ef7f" prot="public">
          <name>DEDUP_PAYLOAD_UNKNOWN</name>
          <initializer>= 0</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="spec_8h_1a992adb461488c98fc376295507cce753a823aad1257e42377bce884f0cd0a0881" prot="public">
          <name>DEDUP_PAYLOAD_INT4_BLOCKS</name>
          <initializer>= 1</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="spec_8h_1a992adb461488c98fc376295507cce753ae969028b1fae9f600e30c8c1d8eeb6fc" prot="public">
          <name>DEDUP_PAYLOAD_SCALES</name>
          <initializer>= 2</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="spec_8h_1a992adb461488c98fc376295507cce753a45ed9427f01a8c3d2b7d413b6a2d9e5a" prot="public">
          <name>DEDUP_PAYLOAD_OTHER</name>
          <initializer>= 3</initializer>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
<para>Kind of payload described by a tensor entry. </para>
        </briefdescription>
        <detaileddescription>
<para>This is deliberately generic: &quot;blob&quot; can represent int4 blocks, int4 scales, fp16 scales, or any other packed stream, as long as the extractor and runtime agree on interpretation and block sizing. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="56" column="1" bodyfile="engine/include/spec.h" bodystart="56" bodyend="61"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="typedef">
      <memberdef kind="typedef" id="spec_8h_1a3cbc09762fae600c52371a30b5995428" prot="public" static="no">
        <type>enum <ref refid="spec_8h_1a992adb461488c98fc376295507cce753" kindref="member">dedup_payload_kind_e</ref></type>
        <definition>typedef enum dedup_payload_kind_e dedup_payload_kind_t</definition>
        <argsstring></argsstring>
        <name>dedup_payload_kind_t</name>
        <briefdescription>
<para>Kind of payload described by a tensor entry. </para>
        </briefdescription>
        <detaileddescription>
<para>This is deliberately generic: &quot;blob&quot; can represent int4 blocks, int4 scales, fp16 scales, or any other packed stream, as long as the extractor and runtime agree on interpretation and block sizing. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="61" column="22"/>
      </memberdef>
      <memberdef kind="typedef" id="spec_8h_1ae778e8a35f509fff613799f77c26ea92" prot="public" static="no">
        <type>struct <ref refid="structdedup__spec__header__s" kindref="compound">dedup_spec_header_s</ref></type>
        <definition>typedef struct dedup_spec_header_s dedup_spec_header_t</definition>
        <argsstring></argsstring>
        <name>dedup_spec_header_t</name>
        <briefdescription>
<para>On-disk header for dedup.spec.bin. </para>
        </briefdescription>
        <detaileddescription>
<para>All offsets are file-relative offsets into the spec file itself. All other streams (defaults/exceptions/masks) are separate files; their offsets are relative to their own file starts.</para>
<para>The spec file stores:<itemizedlist>
<listitem><para>header</para>
</listitem><listitem><para>entry table [entry_count]</para>
</listitem><listitem><para>string table (NUL-terminated names)</para>
</listitem></itemizedlist>
</para>
<para>Each entry references its name via name_off (offset into string table). </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="92" column="21"/>
      </memberdef>
      <memberdef kind="typedef" id="spec_8h_1aca385869a249a66b951f04b73feff41e" prot="public" static="no">
        <type>struct <ref refid="structdedup__spec__entry__s" kindref="compound">dedup_spec_entry_s</ref></type>
        <definition>typedef struct dedup_spec_entry_s dedup_spec_entry_t</definition>
        <argsstring></argsstring>
        <name>dedup_spec_entry_t</name>
        <briefdescription>
<para>A single dedup mapping entry for one tensor blob. </para>
        </briefdescription>
        <detaileddescription>
<para>Reconstruction:<itemizedlist>
<listitem><para>The blob is partitioned into fixed-size blocks: block_bytes.</para>
</listitem><listitem><para>For block i: if mask[i] == 0: copy block i from defaults at (defaults_off + i*block_bytes) else: copy block i from exceptions at exceptions_off + ex_index(i)*block_bytes</para>
</listitem></itemizedlist>
</para>
<para>Where ex_index(i) is the number of set bits in mask[0..i-1].</para>
<para>Masks are stored as a packed bitset in masks.bin:<itemizedlist>
<listitem><para>bit i corresponds to block i</para>
</listitem><listitem><para>LSB-first within each byte (bit0 is block 0)</para>
</listitem></itemizedlist>
</para>
<para>Notes:<itemizedlist>
<listitem><para>defaults_off points to a per-group default blob; multiple entries may share it.</para>
</listitem><listitem><para>original_* fields are informational and can be used for validation/debug. </para>
</listitem></itemizedlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="133" column="20"/>
      </memberdef>
      <memberdef kind="typedef" id="spec_8h_1a7bad93fc007d692d16eeaa767540ccb8" prot="public" static="no">
        <type>struct <ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_s</ref></type>
        <definition>typedef struct dedup_spec_builder_s dedup_spec_builder_t</definition>
        <argsstring></argsstring>
        <name>dedup_spec_builder_t</name>
        <briefdescription>
<para>Opaque builder used by the extractor to assemble and write spec files. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="138" column="35" bodyfile="engine/include/spec.h" bodystart="138" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="spec_8h_1a3f08d8f81fdefd7da22524edfcb56891" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="spec_8h_1a7bad93fc007d692d16eeaa767540ccb8" kindref="member">dedup_spec_builder_t</ref> *</type>
        <definition>dedup_spec_builder_t * dedup_spec_builder_create</definition>
        <argsstring>(void)</argsstring>
        <name>dedup_spec_builder_create</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Create a new spec builder. </para>
        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>Pointer to a new builder, or NULL on allocation failure. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="145" column="22" bodyfile="engine/src/dedup/spec.c" bodystart="56" bodyend="68" declfile="engine/include/spec.h" declline="145" declcolumn="22"/>
        <references refid="spec_8c_1ad508d2580b147be9874e4ae46ea54ef4" compoundref="spec_8c" startline="45" endline="54">ensure_strings_cap</references>
        <references refid="structdedup__spec__builder__s_1a5bb58107daf1a00677599a0a2d59ba1b" compoundref="spec_8c" startline="27">dedup_spec_builder_s::strings</references>
        <references refid="structdedup__spec__builder__s_1a6d9ac1cb6cc7d3701558a1e0627a54c0" compoundref="spec_8c" startline="28">dedup_spec_builder_s::strings_len</references>
        <referencedby refid="dedup__extract_8c_1a3c04138a5bfe5d72780bb7e82a18e627" compoundref="dedup__extract_8c" startline="548" endline="690">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="spec_8h_1a300efcff3e42f940842bee59b47992b0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void dedup_spec_builder_destroy</definition>
        <argsstring>(dedup_spec_builder_t *b)</argsstring>
        <name>dedup_spec_builder_destroy</name>
        <param>
          <type><ref refid="spec_8h_1a7bad93fc007d692d16eeaa767540ccb8" kindref="member">dedup_spec_builder_t</ref> *</type>
          <declname>b</declname>
        </param>
        <briefdescription>
<para>Destroy a spec builder and release memory. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>b</parametername>
</parameternamelist>
<parameterdescription>
<para>Builder pointer (may be NULL). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="152" column="6" bodyfile="engine/src/dedup/spec.c" bodystart="70" bodyend="75" declfile="engine/include/spec.h" declline="152" declcolumn="6"/>
        <references refid="structdedup__spec__builder__s_1a712a564b7e1007e5bdb73fd0bdc09e0c" compoundref="spec_8c" startline="23">dedup_spec_builder_s::entries</references>
        <references refid="structdedup__spec__builder__s_1a5bb58107daf1a00677599a0a2d59ba1b" compoundref="spec_8c" startline="27">dedup_spec_builder_s::strings</references>
        <referencedby refid="dedup__extract_8c_1a3c04138a5bfe5d72780bb7e82a18e627" compoundref="dedup__extract_8c" startline="548" endline="690">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="spec_8h_1a201f5b2eae10d58c45dffceea3d1a6ea" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>uint64_t</type>
        <definition>uint64_t dedup_spec_builder_intern_string</definition>
        <argsstring>(dedup_spec_builder_t *b, const char *s)</argsstring>
        <name>dedup_spec_builder_intern_string</name>
        <param>
          <type><ref refid="spec_8h_1a7bad93fc007d692d16eeaa767540ccb8" kindref="member">dedup_spec_builder_t</ref> *</type>
          <declname>b</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>s</declname>
        </param>
        <briefdescription>
<para>Add (or reuse) a string in the builder&apos;s string table. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>b</parametername>
</parameternamelist>
<parameterdescription>
<para>Builder. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>s</parametername>
</parameternamelist>
<parameterdescription>
<para>NUL-terminated string. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Offset into the eventual string table (name_off), or 0 on failure.</para>
</simplesect>
<simplesect kind="note"><para>Offset 0 is valid if the string table starts at offset 0; however this builder uses a leading &apos;\0&apos; sentinel so offset 0 is reserved, and failures return 0. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="164" column="10" bodyfile="engine/src/dedup/spec.c" bodystart="77" bodyend="96" declfile="engine/include/spec.h" declline="164" declcolumn="10"/>
        <references refid="spec_8c_1ad508d2580b147be9874e4ae46ea54ef4" compoundref="spec_8c" startline="45" endline="54">ensure_strings_cap</references>
        <references refid="structdedup__spec__builder__s_1a5bb58107daf1a00677599a0a2d59ba1b" compoundref="spec_8c" startline="27">dedup_spec_builder_s::strings</references>
        <references refid="structdedup__spec__builder__s_1a6d9ac1cb6cc7d3701558a1e0627a54c0" compoundref="spec_8c" startline="28">dedup_spec_builder_s::strings_len</references>
        <referencedby refid="dedup__extract_8c_1a3c04138a5bfe5d72780bb7e82a18e627" compoundref="dedup__extract_8c" startline="548" endline="690">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="spec_8h_1aaec23b4132eb724935798d82eb8fbb13" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int dedup_spec_builder_add_entry</definition>
        <argsstring>(dedup_spec_builder_t *b, const dedup_spec_entry_t *e)</argsstring>
        <name>dedup_spec_builder_add_entry</name>
        <param>
          <type><ref refid="spec_8h_1a7bad93fc007d692d16eeaa767540ccb8" kindref="member">dedup_spec_builder_t</ref> *</type>
          <declname>b</declname>
        </param>
        <param>
          <type>const <ref refid="spec_8h_1aca385869a249a66b951f04b73feff41e" kindref="member">dedup_spec_entry_t</ref> *</type>
          <declname>e</declname>
        </param>
        <briefdescription>
<para>Append a spec entry. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>b</parametername>
</parameternamelist>
<parameterdescription>
<para>Builder. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>e</parametername>
</parameternamelist>
<parameterdescription>
<para>Entry to append (copied by value). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 on success, non-zero on failure. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="173" column="5" bodyfile="engine/src/dedup/spec.c" bodystart="98" bodyend="103" declfile="engine/include/spec.h" declline="173" declcolumn="5"/>
        <references refid="spec_8c_1a0fab59072bb5f57a21ce768e33da3d1e" compoundref="spec_8c" startline="33" endline="42">ensure_entries_cap</references>
        <references refid="structdedup__spec__builder__s_1a712a564b7e1007e5bdb73fd0bdc09e0c" compoundref="spec_8c" startline="23">dedup_spec_builder_s::entries</references>
        <references refid="structdedup__spec__builder__s_1ab6de1fff32673312998daf1c4e09dbcd" compoundref="spec_8c" startline="24">dedup_spec_builder_s::entry_count</references>
        <referencedby refid="dedup__extract_8c_1a3c04138a5bfe5d72780bb7e82a18e627" compoundref="dedup__extract_8c" startline="548" endline="690">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="spec_8h_1acded5265b0bad8d45d2106bef8d4876b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int dedup_spec_builder_write_file</definition>
        <argsstring>(dedup_spec_builder_t *b, const char *path, uint64_t defaults_bytes, uint64_t exceptions_bytes, uint64_t masks_bytes)</argsstring>
        <name>dedup_spec_builder_write_file</name>
        <param>
          <type><ref refid="spec_8h_1a7bad93fc007d692d16eeaa767540ccb8" kindref="member">dedup_spec_builder_t</ref> *</type>
          <declname>b</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>path</declname>
        </param>
        <param>
          <type>uint64_t</type>
          <declname>defaults_bytes</declname>
        </param>
        <param>
          <type>uint64_t</type>
          <declname>exceptions_bytes</declname>
        </param>
        <param>
          <type>uint64_t</type>
          <declname>masks_bytes</declname>
        </param>
        <briefdescription>
<para>Write the spec binary file. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>b</parametername>
</parameternamelist>
<parameterdescription>
<para>Builder. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>path</parametername>
</parameternamelist>
<parameterdescription>
<para>Output path (e.g., &quot;dedup.spec.bin&quot;). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>defaults_bytes</parametername>
</parameternamelist>
<parameterdescription>
<para>Total bytes written to defaults.bin (for header info). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>exceptions_bytes</parametername>
</parameternamelist>
<parameterdescription>
<para>Total bytes written to exceptions.bin (for header info). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>masks_bytes</parametername>
</parameternamelist>
<parameterdescription>
<para>Total bytes written to masks.bin (for header info). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 on success, non-zero on error. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="185" column="5" bodyfile="engine/src/dedup/spec.c" bodystart="111" bodyend="154" declfile="engine/include/spec.h" declline="185" declcolumn="5"/>
        <references refid="spec_8h_1a23a00336f89211fb8137d3ae9ab34244" compoundref="spec_8h" startline="40">DEDUP_SPEC_MAGIC0</references>
        <references refid="spec_8h_1af06299e637cba0228949a1999d887f62" compoundref="spec_8h" startline="41">DEDUP_SPEC_MAGIC1</references>
        <references refid="spec_8h_1a310826db0092ac4d679b6e4589c9cb54" compoundref="spec_8h" startline="42">DEDUP_SPEC_MAGIC2</references>
        <references refid="spec_8h_1affd9260ef14e41ec7d66fbc805fceba2" compoundref="spec_8h" startline="43">DEDUP_SPEC_MAGIC3</references>
        <references refid="spec_8h_1a8972c28ecbc809aaf37f5f8f9f7b3710" compoundref="spec_8h" startline="44">DEDUP_SPEC_MAGIC4</references>
        <references refid="spec_8h_1a68c8a2ab095696f73243975fdb752927" compoundref="spec_8h" startline="45">DEDUP_SPEC_MAGIC5</references>
        <references refid="spec_8h_1a19f9163e9753c34cfd321bfb32cbdc35" compoundref="spec_8h" startline="46">DEDUP_SPEC_MAGIC6</references>
        <references refid="spec_8h_1a498f47d573a31462f279ad13cc3f4bb0" compoundref="spec_8h" startline="47">DEDUP_SPEC_MAGIC7</references>
        <references refid="spec_8h_1a79fa3ff7f9dac8e3d361925422c820aa" compoundref="spec_8h" startline="37">DEDUP_SPEC_VERSION</references>
        <references refid="structdedup__spec__header__s_1aff300cb9a5925c2e48e2b885e30a6138" compoundref="spec_8h" startline="87">dedup_spec_header_s::defaults_bytes</references>
        <references refid="structdedup__spec__builder__s_1a712a564b7e1007e5bdb73fd0bdc09e0c" compoundref="spec_8c" startline="23">dedup_spec_builder_s::entries</references>
        <references refid="structdedup__spec__header__s_1a44a4a9aa4001e0a3f2f413e2029c54cd" compoundref="spec_8h" startline="83">dedup_spec_header_s::entries_off</references>
        <references refid="structdedup__spec__header__s_1ad11d8268b50851fe861447d4ede8367b" compoundref="spec_8h" startline="82">dedup_spec_header_s::entry_count</references>
        <references refid="structdedup__spec__builder__s_1ab6de1fff32673312998daf1c4e09dbcd" compoundref="spec_8c" startline="24">dedup_spec_builder_s::entry_count</references>
        <references refid="structdedup__spec__header__s_1abb9710e9674f634bff5cb83f384271be" compoundref="spec_8h" startline="88">dedup_spec_header_s::exceptions_bytes</references>
        <references refid="structdedup__spec__header__s_1af56c6fa359b16bbec5471f6c86d6b636" compoundref="spec_8h" startline="78">dedup_spec_header_s::magic</references>
        <references refid="structdedup__spec__header__s_1a2a775f0c8230bb2f01795343dd37ee34" compoundref="spec_8h" startline="89">dedup_spec_header_s::masks_bytes</references>
        <references refid="structdedup__spec__builder__s_1a5bb58107daf1a00677599a0a2d59ba1b" compoundref="spec_8c" startline="27">dedup_spec_builder_s::strings</references>
        <references refid="structdedup__spec__header__s_1a2103c890ff95bcb00925921c5b85cdce" compoundref="spec_8h" startline="85">dedup_spec_header_s::strings_bytes</references>
        <references refid="structdedup__spec__builder__s_1a6d9ac1cb6cc7d3701558a1e0627a54c0" compoundref="spec_8c" startline="28">dedup_spec_builder_s::strings_len</references>
        <references refid="structdedup__spec__header__s_1a2243dd9b1697d7bf9b6161ee3b13dc50" compoundref="spec_8h" startline="84">dedup_spec_header_s::strings_off</references>
        <references refid="structdedup__spec__header__s_1a7ce3fed470734334150b2a8bf6879dac" compoundref="spec_8h" startline="79">dedup_spec_header_s::version</references>
        <references refid="spec_8c_1aad051575e6f63b25a8bc30cb5447c1bb" compoundref="spec_8c" startline="106" endline="109">write_all</references>
        <referencedby refid="dedup__extract_8c_1a3c04138a5bfe5d72780bb7e82a18e627" compoundref="dedup__extract_8c" startline="548" endline="690">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="spec_8h_1a8d80797ffd39d0463f8274bfd05b51a8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>uint64_t</type>
        <definition>uint64_t dedup_fnv1a64</definition>
        <argsstring>(const void *data, size_t n)</argsstring>
        <name>dedup_fnv1a64</name>
        <param>
          <type>const void *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>n</declname>
        </param>
        <briefdescription>
<para>Compute a 64-bit FNV-1a hash for bytes (helper). </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>data</parametername>
</parameternamelist>
<parameterdescription>
<para>Byte pointer. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>n</parametername>
</parameternamelist>
<parameterdescription>
<para>Bytes length. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>64-bit hash. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="engine/include/spec.h" line="200" column="10" bodyfile="engine/src/dedup/spec.c" bodystart="156" bodyend="164" declfile="engine/include/spec.h" declline="200" declcolumn="10"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
<para>Lossless deduplication specification (binary) for INT4 weight blobs. </para>
    </briefdescription>
    <detaileddescription>
<para>This module defines a compact, mmap-friendly &quot;spec&quot; format describing how to reconstruct original weight blobs from:<itemizedlist>
<listitem><para>a shared &quot;defaults&quot; blob file (per group, stored once), and</para>
</listitem><listitem><para>per-tensor exception masks + exception data blocks (stored only for deltas).</para>
</listitem></itemizedlist>
</para>
<para>Design goals:<itemizedlist>
<listitem><para>Zero third-party dependencies.</para>
</listitem><listitem><para>Deterministic, stable binary layout (little-endian).</para>
</listitem><listitem><para>Runtime-friendly: reconstruction can be a tight loop over fixed-size blocks.</para>
</listitem><listitem><para>Lossless: every byte of the original tensor payload is reproducible.</para>
</listitem></itemizedlist>
</para>
<para>The extractor (<ref refid="dedup__extract_8c" kindref="compound">dedup_extract.c</ref>) produces:<itemizedlist>
<listitem><para>dedup.spec.bin (this spec format)</para>
</listitem><listitem><para>dedup.defaults.bin (concatenated default blobs)</para>
</listitem><listitem><para>dedup.exceptions.bin (concatenated exception blocks)</para>
</listitem><listitem><para>dedup.masks.bin (concatenated bitset masks)</para>
</listitem></itemizedlist>
</para>
<para>A &quot;tensor blob&quot; here is an opaque byte array representing the packed weights for a tensor (or sub-tensor) exactly as they appear on disk (e.g., q4 blocks, scales, etc.). </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>DEDUP_SPEC_H</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_H</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;C&quot;</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdint.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stddef.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="spec_8h_1a79fa3ff7f9dac8e3d361925422c820aa" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_VERSION<sp/>1u</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="40" refid="spec_8h_1a23a00336f89211fb8137d3ae9ab34244" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC0<sp/>0x44u<sp/></highlight><highlight class="comment">/*<sp/>&apos;D&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="spec_8h_1af06299e637cba0228949a1999d887f62" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC1<sp/>0x45u<sp/></highlight><highlight class="comment">/*<sp/>&apos;E&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42" refid="spec_8h_1a310826db0092ac4d679b6e4589c9cb54" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC2<sp/>0x44u<sp/></highlight><highlight class="comment">/*<sp/>&apos;D&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43" refid="spec_8h_1affd9260ef14e41ec7d66fbc805fceba2" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC3<sp/>0x53u<sp/></highlight><highlight class="comment">/*<sp/>&apos;S&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="spec_8h_1a8972c28ecbc809aaf37f5f8f9f7b3710" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC4<sp/>0x50u<sp/></highlight><highlight class="comment">/*<sp/>&apos;P&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45" refid="spec_8h_1a68c8a2ab095696f73243975fdb752927" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC5<sp/>0x45u<sp/></highlight><highlight class="comment">/*<sp/>&apos;E&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46" refid="spec_8h_1a19f9163e9753c34cfd321bfb32cbdc35" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC6<sp/>0x43u<sp/></highlight><highlight class="comment">/*<sp/>&apos;C&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47" refid="spec_8h_1a498f47d573a31462f279ad13cc3f4bb0" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>DEDUP_SPEC_MAGIC7<sp/>0x00u<sp/></highlight><highlight class="comment">/*<sp/>&apos;\0&apos;<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="spec_8h_1a992adb461488c98fc376295507cce753" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="spec_8h_1a992adb461488c98fc376295507cce753" kindref="member">dedup_payload_kind_e</ref><sp/>{</highlight></codeline>
<codeline lineno="57" refid="spec_8h_1a992adb461488c98fc376295507cce753a82ec592a7b60f9a3840338b6d0d8ef7f" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="spec_8h_1a992adb461488c98fc376295507cce753a82ec592a7b60f9a3840338b6d0d8ef7f" kindref="member">DEDUP_PAYLOAD_UNKNOWN</ref><sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="58" refid="spec_8h_1a992adb461488c98fc376295507cce753a823aad1257e42377bce884f0cd0a0881" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="spec_8h_1a992adb461488c98fc376295507cce753a823aad1257e42377bce884f0cd0a0881" kindref="member">DEDUP_PAYLOAD_INT4_BLOCKS</ref><sp/>=<sp/>1,</highlight></codeline>
<codeline lineno="59" refid="spec_8h_1a992adb461488c98fc376295507cce753ae969028b1fae9f600e30c8c1d8eeb6fc" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="spec_8h_1a992adb461488c98fc376295507cce753ae969028b1fae9f600e30c8c1d8eeb6fc" kindref="member">DEDUP_PAYLOAD_SCALES</ref><sp/>=<sp/>2,</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><ref refid="spec_8h_1a992adb461488c98fc376295507cce753a45ed9427f01a8c3d2b7d413b6a2d9e5a" kindref="member">DEDUP_PAYLOAD_OTHER</ref><sp/>=<sp/>3</highlight></codeline>
<codeline lineno="61" refid="spec_8h_1a3cbc09762fae600c52371a30b5995428" refkind="member"><highlight class="normal">}<sp/><ref refid="spec_8h_1a3cbc09762fae600c52371a30b5995428" kindref="member">dedup_payload_kind_t</ref>;</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="77" refid="structdedup__spec__header__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdedup__spec__header__s" kindref="compound">dedup_spec_header_s</ref><sp/>{</highlight></codeline>
<codeline lineno="78" refid="structdedup__spec__header__s_1af56c6fa359b16bbec5471f6c86d6b636" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><sp/><ref refid="structdedup__spec__header__s_1af56c6fa359b16bbec5471f6c86d6b636" kindref="member">magic</ref>[8];<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="79" refid="structdedup__spec__header__s_1a7ce3fed470734334150b2a8bf6879dac" refkind="member"><highlight class="normal"><sp/><sp/>uint32_t<sp/><ref refid="structdedup__spec__header__s_1a7ce3fed470734334150b2a8bf6879dac" kindref="member">version</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="80" refid="structdedup__spec__header__s_1accf658655c069c0345651576558c4686" refkind="member"><highlight class="normal"><sp/><sp/>uint32_t<sp/><ref refid="structdedup__spec__header__s_1accf658655c069c0345651576558c4686" kindref="member">reserved0</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="82" refid="structdedup__spec__header__s_1ad11d8268b50851fe861447d4ede8367b" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1ad11d8268b50851fe861447d4ede8367b" kindref="member">entry_count</ref>;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="83" refid="structdedup__spec__header__s_1a44a4a9aa4001e0a3f2f413e2029c54cd" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1a44a4a9aa4001e0a3f2f413e2029c54cd" kindref="member">entries_off</ref>;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="84" refid="structdedup__spec__header__s_1a2243dd9b1697d7bf9b6161ee3b13dc50" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1a2243dd9b1697d7bf9b6161ee3b13dc50" kindref="member">strings_off</ref>;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="85" refid="structdedup__spec__header__s_1a2103c890ff95bcb00925921c5b85cdce" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1a2103c890ff95bcb00925921c5b85cdce" kindref="member">strings_bytes</ref>;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="87" refid="structdedup__spec__header__s_1aff300cb9a5925c2e48e2b885e30a6138" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1aff300cb9a5925c2e48e2b885e30a6138" kindref="member">defaults_bytes</ref>;<sp/><sp/></highlight></codeline>
<codeline lineno="88" refid="structdedup__spec__header__s_1abb9710e9674f634bff5cb83f384271be" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1abb9710e9674f634bff5cb83f384271be" kindref="member">exceptions_bytes</ref>;</highlight></codeline>
<codeline lineno="89" refid="structdedup__spec__header__s_1a2a775f0c8230bb2f01795343dd37ee34" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1a2a775f0c8230bb2f01795343dd37ee34" kindref="member">masks_bytes</ref>;<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="91" refid="structdedup__spec__header__s_1a0fc69e81258bb7f16cb0013423076c17" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__header__s_1a0fc69e81258bb7f16cb0013423076c17" kindref="member">reserved1</ref>[8];<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="92" refid="spec_8h_1ae778e8a35f509fff613799f77c26ea92" refkind="member"><highlight class="normal">}<sp/><ref refid="spec_8h_1ae778e8a35f509fff613799f77c26ea92" kindref="member">dedup_spec_header_t</ref>;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="113" refid="structdedup__spec__entry__s" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdedup__spec__entry__s" kindref="compound">dedup_spec_entry_s</ref><sp/>{</highlight></codeline>
<codeline lineno="114" refid="structdedup__spec__entry__s_1a02f8670133b35e5332f1e659be2ce96b" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a02f8670133b35e5332f1e659be2ce96b" kindref="member">name_off</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="116" refid="structdedup__spec__entry__s_1a24519733602e4f2e6651ef3c35883448" refkind="member"><highlight class="normal"><sp/><sp/>uint32_t<sp/><ref refid="structdedup__spec__entry__s_1a24519733602e4f2e6651ef3c35883448" kindref="member">payload_kind</ref>;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="117" refid="structdedup__spec__entry__s_1a3e3b516ae0aeb0d0f6c79cc47d23d0b8" refkind="member"><highlight class="normal"><sp/><sp/>uint32_t<sp/><ref refid="structdedup__spec__entry__s_1a3e3b516ae0aeb0d0f6c79cc47d23d0b8" kindref="member">reserved0</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="119" refid="structdedup__spec__entry__s_1a1a7ab0718fd77ab4c41cdbfbed85bc32" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a1a7ab0718fd77ab4c41cdbfbed85bc32" kindref="member">group_id</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="121" refid="structdedup__spec__entry__s_1a92b187c2ce0c9c860a70639dd601a670" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a92b187c2ce0c9c860a70639dd601a670" kindref="member">original_bytes</ref>;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="122" refid="structdedup__spec__entry__s_1a638b47592998c76e6c9e222cf67c7aba" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a638b47592998c76e6c9e222cf67c7aba" kindref="member">block_bytes</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="123" refid="structdedup__spec__entry__s_1a3f6404ce6994f721daaff7d43af92a02" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a3f6404ce6994f721daaff7d43af92a02" kindref="member">block_count</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="125" refid="structdedup__spec__entry__s_1a5ea830bf8982deebe6fcc226cade61c6" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a5ea830bf8982deebe6fcc226cade61c6" kindref="member">defaults_off</ref>;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="126" refid="structdedup__spec__entry__s_1ae44efd674b3f687142912581c2104cb8" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1ae44efd674b3f687142912581c2104cb8" kindref="member">exceptions_off</ref>;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="127" refid="structdedup__spec__entry__s_1a7b602722a70f8b242a433c5508dd6acf" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a7b602722a70f8b242a433c5508dd6acf" kindref="member">exceptions_blocks</ref>;<sp/></highlight></codeline>
<codeline lineno="129" refid="structdedup__spec__entry__s_1afecde310431fc65484c36fd4de17cce5" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1afecde310431fc65484c36fd4de17cce5" kindref="member">mask_off</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="130" refid="structdedup__spec__entry__s_1a7b7f5ad90e837e1c413a72fb28da9f71" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a7b7f5ad90e837e1c413a72fb28da9f71" kindref="member">mask_bytes</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="132" refid="structdedup__spec__entry__s_1a95febae40f00a87849fc058f0a2cae83" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="structdedup__spec__entry__s_1a95febae40f00a87849fc058f0a2cae83" kindref="member">reserved1</ref>[4];<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="133" refid="spec_8h_1aca385869a249a66b951f04b73feff41e" refkind="member"><highlight class="normal">}<sp/><ref refid="spec_8h_1aca385869a249a66b951f04b73feff41e" kindref="member">dedup_spec_entry_t</ref>;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="138" refid="spec_8h_1a7bad93fc007d692d16eeaa767540ccb8" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_s</ref><sp/><ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_t</ref>;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_t</ref>*<sp/><ref refid="spec_8h_1a3f08d8f81fdefd7da22524edfcb56891" kindref="member">dedup_spec_builder_create</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="spec_8h_1a300efcff3e42f940842bee59b47992b0" kindref="member">dedup_spec_builder_destroy</ref>(<ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_t</ref>*<sp/>b);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal">uint64_t<sp/><ref refid="spec_8h_1a201f5b2eae10d58c45dffceea3d1a6ea" kindref="member">dedup_spec_builder_intern_string</ref>(<ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_t</ref>*<sp/>b,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>s);</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="spec_8h_1aaec23b4132eb724935798d82eb8fbb13" kindref="member">dedup_spec_builder_add_entry</ref>(<ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_t</ref>*<sp/>b,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structdedup__spec__entry__s" kindref="compound">dedup_spec_entry_t</ref>*<sp/>e);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="spec_8h_1acded5265b0bad8d45d2106bef8d4876b" kindref="member">dedup_spec_builder_write_file</ref>(</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><ref refid="structdedup__spec__builder__s" kindref="compound">dedup_spec_builder_t</ref>*<sp/>b,</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>path,</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/>uint64_t<sp/>defaults_bytes,</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/>uint64_t<sp/>exceptions_bytes,</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/>uint64_t<sp/>masks_bytes</highlight></codeline>
<codeline lineno="191"><highlight class="normal">);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal">uint64_t<sp/><ref refid="spec_8h_1a8d80797ffd39d0463f8274bfd05b51a8" kindref="member">dedup_fnv1a64</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>data,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>n);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal">}<sp/></highlight><highlight class="comment">/*<sp/>extern<sp/>&quot;C&quot;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>DEDUP_SPEC_H<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="engine/include/spec.h"/>
  </compounddef>
</doxygen>
