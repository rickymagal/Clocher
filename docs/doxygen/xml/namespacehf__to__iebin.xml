<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="namespacehf__to__iebin" kind="namespace" language="Python">
    <compoundname>hf_to_iebin</compoundname>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespacehf__to__iebin_1ac3cef0864139e3543306b846207f8c3e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>None</type>
        <definition> None hf_to_iebin.log</definition>
        <argsstring>(str msg)</argsstring>
        <name>log</name>
        <qualifiedname>hf_to_iebin.log</qualifiedname>
        <param>
          <type>str</type>
          <declname>msg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="47" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="47" bodyend="49"/>
        <referencedby refid="namespacehf__to__iebin_1a2514cfb35940e3760b12dd945c773b19" compoundref="hf__to__iebin_8py" startline="107" endline="189">load_q4_map</referencedby>
        <referencedby refid="namespacehf__to__iebin_1a7d824cc4e15cdfe433bb87451d0c45ee" compoundref="hf__to__iebin_8py" startline="60" endline="72">load_state_keys_from_shard</referencedby>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
        <referencedby refid="namespacehf__to__iebin_1a423f08d9c5ddd7dfd3eb06f287ce6c5b" compoundref="hf__to__iebin_8py" startline="254" endline="314">stream_write_blob</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a4b60e8118426fdaed71bda80d597f94a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>None</type>
        <definition> None hf_to_iebin.die</definition>
        <argsstring>(str msg, int code=2)</argsstring>
        <name>die</name>
        <qualifiedname>hf_to_iebin.die</qualifiedname>
        <param>
          <type>str</type>
          <declname>msg</declname>
        </param>
        <param>
          <type>int</type>
          <declname>code</declname>
          <defval>2</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="50" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="50" bodyend="53"/>
        <referencedby refid="namespacehf__to__iebin_1a6b3ccdffd4934259e8dd69e94e340e5d" compoundref="hf__to__iebin_8py" startline="54" endline="59">find_shards</referencedby>
        <referencedby refid="namespacehf__to__iebin_1a2514cfb35940e3760b12dd945c773b19" compoundref="hf__to__iebin_8py" startline="107" endline="189">load_q4_map</referencedby>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
        <referencedby refid="namespacehf__to__iebin_1a423f08d9c5ddd7dfd3eb06f287ce6c5b" compoundref="hf__to__iebin_8py" startline="254" endline="314">stream_write_blob</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a6b3ccdffd4934259e8dd69e94e340e5d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>List[Path]</type>
        <definition> List[Path] hf_to_iebin.find_shards</definition>
        <argsstring>(Path hf_dir)</argsstring>
        <name>find_shards</name>
        <qualifiedname>hf_to_iebin.find_shards</qualifiedname>
        <param>
          <type>Path</type>
          <declname>hf_dir</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="54" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="54" bodyend="59"/>
        <references refid="namespacehf__to__iebin_1a4b60e8118426fdaed71bda80d597f94a" compoundref="hf__to__iebin_8py" startline="50" endline="53">die</references>
        <referencedby refid="namespacehf__to__iebin_1affc6b9577a480b97d139fc7624383635" compoundref="hf__to__iebin_8py" startline="73" endline="92">pass1_index</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a7d824cc4e15cdfe433bb87451d0c45ee" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Dict[str, Any]</type>
        <definition> Dict[str, Any] hf_to_iebin.load_state_keys_from_shard</definition>
        <argsstring>(Path shard_path)</argsstring>
        <name>load_state_keys_from_shard</name>
        <qualifiedname>hf_to_iebin.load_state_keys_from_shard</qualifiedname>
        <param>
          <type>Path</type>
          <declname>shard_path</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="60" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="60" bodyend="72"/>
        <references refid="namespacehf__to__iebin_1ac3cef0864139e3543306b846207f8c3e" compoundref="hf__to__iebin_8py" startline="47" endline="49">log</references>
        <referencedby refid="namespacehf__to__iebin_1affc6b9577a480b97d139fc7624383635" compoundref="hf__to__iebin_8py" startline="73" endline="92">pass1_index</referencedby>
        <referencedby refid="namespacehf__to__iebin_1a423f08d9c5ddd7dfd3eb06f287ce6c5b" compoundref="hf__to__iebin_8py" startline="254" endline="314">stream_write_blob</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1affc6b9577a480b97d139fc7624383635" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Tuple[List[Path], List[str], Dict[str, Tuple[Tuple[int,...], str, int]]]</type>
        <definition> Tuple[List[Path], List[str], Dict[str, Tuple[Tuple[int, ...], str, int]]] hf_to_iebin.pass1_index</definition>
        <argsstring>(Path hf_dir)</argsstring>
        <name>pass1_index</name>
        <qualifiedname>hf_to_iebin.pass1_index</qualifiedname>
        <param>
          <type>Path</type>
          <declname>hf_dir</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Map key -&gt; (shape, dtype_str, shard_idx) without holding tensors in memory.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="73" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="73" bodyend="92"/>
        <references refid="namespacehf__to__iebin_1a6b3ccdffd4934259e8dd69e94e340e5d" compoundref="hf__to__iebin_8py" startline="54" endline="59">find_shards</references>
        <references refid="namespacehf__to__iebin_1a7d824cc4e15cdfe433bb87451d0c45ee" compoundref="hf__to__iebin_8py" startline="60" endline="72">load_state_keys_from_shard</references>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a31f4d6cf12f537fbc82c75b1eef68f7a" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Any</type>
        <definition> Any hf_to_iebin._read_json</definition>
        <argsstring>(Path p)</argsstring>
        <name>_read_json</name>
        <qualifiedname>hf_to_iebin._read_json</qualifiedname>
        <param>
          <type>Path</type>
          <declname>p</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="93" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="93" bodyend="96"/>
        <referencedby refid="namespacehf__to__iebin_1a2514cfb35940e3760b12dd945c773b19" compoundref="hf__to__iebin_8py" startline="107" endline="189">load_q4_map</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1ad64f85f918c3f7f86e5ba073953ad62e" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>List[Dict[str, Any]]</type>
        <definition> List[Dict[str, Any]] hf_to_iebin._read_jsonl</definition>
        <argsstring>(Path p)</argsstring>
        <name>_read_jsonl</name>
        <qualifiedname>hf_to_iebin._read_jsonl</qualifiedname>
        <param>
          <type>Path</type>
          <declname>p</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="97" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="97" bodyend="106"/>
        <referencedby refid="namespacehf__to__iebin_1a2514cfb35940e3760b12dd945c773b19" compoundref="hf__to__iebin_8py" startline="107" endline="189">load_q4_map</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a2514cfb35940e3760b12dd945c773b19" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Dict[str, Dict[str, Any]]</type>
        <definition> Dict[str, Dict[str, Any]] hf_to_iebin.load_q4_map</definition>
        <argsstring>(Path path)</argsstring>
        <name>load_q4_map</name>
        <qualifiedname>hf_to_iebin.load_q4_map</qualifiedname>
        <param>
          <type>Path</type>
          <declname>path</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Load an INT4 manifest into a dict keyed by tensor name.

Canonical item keys:
  name (required)
  int4_bin / packed_bin (required) -&gt; &quot;int4_bin&quot;
  scale_bin (required)
  per (&quot;row&quot;|&quot;tensor&quot;, required)
  rows (required), cols (required)
  scale_dtype (optional, default &quot;fp16&quot;)
  pack (optional, default &quot;nibble_lohi&quot;)
  zp (optional, default 0)
  symmetric (optional, default True)
</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="107" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="107" bodyend="189"/>
        <references refid="namespacehf__to__iebin_1a31f4d6cf12f537fbc82c75b1eef68f7a" compoundref="hf__to__iebin_8py" startline="93" endline="96">_read_json</references>
        <references refid="namespacehf__to__iebin_1ad64f85f918c3f7f86e5ba073953ad62e" compoundref="hf__to__iebin_8py" startline="97" endline="106">_read_jsonl</references>
        <references refid="namespacehf__to__iebin_1a4b60e8118426fdaed71bda80d597f94a" compoundref="hf__to__iebin_8py" startline="50" endline="53">die</references>
        <references refid="namespacehf__to__iebin_1ac3cef0864139e3543306b846207f8c3e" compoundref="hf__to__iebin_8py" startline="47" endline="49">log</references>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1abd3e5101821b383b59c60e83a5314495" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition> int hf_to_iebin.align_up</definition>
        <argsstring>(int x, int a)</argsstring>
        <name>align_up</name>
        <qualifiedname>hf_to_iebin.align_up</qualifiedname>
        <param>
          <type>int</type>
          <declname>x</declname>
        </param>
        <param>
          <type>int</type>
          <declname>a</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="190" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="190" bodyend="194"/>
        <referencedby refid="namespacehf__to__iebin_1a9221aaef1fe785c428dcc1d54848a19f" compoundref="hf__to__iebin_8py" startline="200" endline="245">compute_layout</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a9221aaef1fe785c428dcc1d54848a19f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Tuple[List[Dict[str, Any]], int]</type>
        <definition> Tuple[List[Dict[str, Any]], int] hf_to_iebin.compute_layout</definition>
        <argsstring>(List[str] order, Dict[str, Tuple[Tuple[int,...], str, int]] key_meta, Dict[str, Dict[str, Any]]|None q4_map, int align)</argsstring>
        <name>compute_layout</name>
        <qualifiedname>hf_to_iebin.compute_layout</qualifiedname>
        <param>
          <type>List</type>
          <declname>order</declname>
          <array>[str]</array>
        </param>
        <param>
          <type>Dict</type>
          <defname>key_meta</defname>
          <array>[str, Tuple[Tuple[int,...]</array>
        </param>
        <param>
          <type>str</type>
          <defname>q4_map</defname>
        </param>
        <param>
          <type>int]]</type>
          <declname>key_meta</declname>
          <defname>align</defname>
        </param>
        <param>
          <type>Dict]|None</type>
          <declname>q4_map</declname>
          <array>[str, Dict[str, Any]</array>
        </param>
        <param>
          <type>int</type>
          <declname>align</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Compute per-tensor layout (dtype, offset, nbytes) for the aggregate bin.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="195" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="200" bodyend="245"/>
        <references refid="namespacehf__to__iebin_1abd3e5101821b383b59c60e83a5314495" compoundref="hf__to__iebin_8py" startline="190" endline="194">align_up</references>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a423f08d9c5ddd7dfd3eb06f287ce6c5b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>None</type>
        <definition> None hf_to_iebin.stream_write_blob</definition>
        <argsstring>(Path out_bin, List[Path] shards, List[str] order, Dict[str, Tuple[Tuple[int,...], str, int]] key_meta, List[Dict[str, Any]] tensors, Dict[str, Dict[str, Any]]|None q4_map, int total_bytes)</argsstring>
        <name>stream_write_blob</name>
        <qualifiedname>hf_to_iebin.stream_write_blob</qualifiedname>
        <param>
          <type>Path</type>
          <declname>out_bin</declname>
        </param>
        <param>
          <type>List</type>
          <declname>shards</declname>
          <array>[Path]</array>
        </param>
        <param>
          <type>List</type>
          <declname>order</declname>
          <array>[str]</array>
        </param>
        <param>
          <type>Dict</type>
          <defname>key_meta</defname>
          <array>[str, Tuple[Tuple[int,...]</array>
        </param>
        <param>
          <type>str</type>
          <defname>tensors</defname>
        </param>
        <param>
          <type>int]]</type>
          <declname>key_meta</declname>
          <defname>q4_map</defname>
        </param>
        <param>
          <type>List]</type>
          <declname>tensors</declname>
          <defname>total_bytes</defname>
          <array>[Dict[str, Any]</array>
        </param>
        <param>
          <type>Dict]|None</type>
          <declname>q4_map</declname>
          <array>[str, Dict[str, Any]</array>
        </param>
        <param>
          <type>int</type>
          <declname>total_bytes</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Create and fill model.ie.bin with FP32 and INT4 data in a single pass.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="246" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="254" bodyend="314"/>
        <references refid="namespacehf__to__iebin_1a4b60e8118426fdaed71bda80d597f94a" compoundref="hf__to__iebin_8py" startline="50" endline="53">die</references>
        <references refid="namespacehf__to__iebin_1a7d824cc4e15cdfe433bb87451d0c45ee" compoundref="hf__to__iebin_8py" startline="60" endline="72">load_state_keys_from_shard</references>
        <references refid="namespacehf__to__iebin_1ac3cef0864139e3543306b846207f8c3e" compoundref="hf__to__iebin_8py" startline="47" endline="49">log</references>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1af84d2ba1d587dddd733c92c0350f7ab5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Dict[str, Any]</type>
        <definition> Dict[str, Any] hf_to_iebin.discover_tokenizer</definition>
        <argsstring>(Path hf_dir)</argsstring>
        <name>discover_tokenizer</name>
        <qualifiedname>hf_to_iebin.discover_tokenizer</qualifiedname>
        <param>
          <type>Path</type>
          <declname>hf_dir</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="315" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="315" bodyend="326"/>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>None</type>
        <definition> None hf_to_iebin.main</definition>
        <argsstring>()</argsstring>
        <name>main</name>
        <qualifiedname>hf_to_iebin.main</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="scripts/hf_to_iebin.py" line="327" column="1" bodyfile="scripts/hf_to_iebin.py" bodystart="327" bodyend="376"/>
        <references refid="namespacehf__to__iebin_1a9221aaef1fe785c428dcc1d54848a19f" compoundref="hf__to__iebin_8py" startline="200" endline="245">compute_layout</references>
        <references refid="namespacehf__to__iebin_1a4b60e8118426fdaed71bda80d597f94a" compoundref="hf__to__iebin_8py" startline="50" endline="53">die</references>
        <references refid="namespacehf__to__iebin_1af84d2ba1d587dddd733c92c0350f7ab5" compoundref="hf__to__iebin_8py" startline="315" endline="326">discover_tokenizer</references>
        <references refid="namespacehf__to__iebin_1a2514cfb35940e3760b12dd945c773b19" compoundref="hf__to__iebin_8py" startline="107" endline="189">load_q4_map</references>
        <references refid="namespacehf__to__iebin_1ac3cef0864139e3543306b846207f8c3e" compoundref="hf__to__iebin_8py" startline="47" endline="49">log</references>
        <references refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</references>
        <references refid="namespacehf__to__iebin_1affc6b9577a480b97d139fc7624383635" compoundref="hf__to__iebin_8py" startline="73" endline="92">pass1_index</references>
        <references refid="namespacehf__to__iebin_1a423f08d9c5ddd7dfd3eb06f287ce6c5b" compoundref="hf__to__iebin_8py" startline="254" endline="314">stream_write_blob</references>
        <referencedby refid="namespacehf__to__iebin_1a6a7ed215f575f747c5b16a53cb95eac4" compoundref="hf__to__iebin_8py" startline="327" endline="376">main</referencedby>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><verbatim>Pack a Hugging Face checkpoint directory (PyTorch shards) into the
Inference Engine container: model.ie.json + model.ie.bin.

Supports mixed precision:
  - FP32 (default): tensors are streamed and stored as row-major FP32.
  - INT4 weight-only: tensors are copied from pre-packed INT4 artifacts and
    annotated with a `quant` object in JSON.

Inputs
------
Required:
  --hf-dir     : HF directory with config.json + pytorch_model-*-of-*.bin
  --out-dir    : Output directory for model.ie.json / model.ie.bin

Optional (INT4 integration):
  --q4-map     : Path to a manifest that lists INT4 artifacts per tensor.
                 Accepted formats:
                   * JSON object: { &quot;&lt;name&gt;&quot;: {...}, ... }
                   * JSON list  : [ {&quot;name&quot;: &quot;...&quot;, ...}, ... ]
                   * JSONL      : one JSON object per line
                   * Directory  : read all *.json files and merge
                 Each item must provide:
                   - &quot;name&quot;: state_dict key (exact)
                   - &quot;int4_bin&quot; or &quot;packed_bin&quot;: path to packed INT4 bytes
                   - &quot;scale_bin&quot;: path to per-row or per-tensor scales
                   - &quot;per&quot;: &quot;row&quot; | &quot;tensor&quot;
                   - &quot;rows&quot;, &quot;cols&quot;: stored shape of the INT4 matrix
                 Optional fields (defaults shown):
                   - &quot;scale_dtype&quot;: &quot;fp16&quot;
                   - &quot;pack&quot;: &quot;nibble_lohi&quot;
                   - &quot;zp&quot;: 0
                   - &quot;symmetric&quot;: true

  --align      : Byte alignment for each tensor in the aggregate bin
                 (default: 64). Use 1 to disable alignment.
</verbatim> </para>
    </detaileddescription>
    <location file="scripts/hf_to_iebin.py" line="1" column="1"/>
  </compounddef>
</doxygen>
