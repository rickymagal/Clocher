<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="namespacededup__prepare__and__extract__all" kind="namespace" language="Python">
    <compoundname>dedup_prepare_and_extract_all</compoundname>
    <sectiondef kind="var">
      <memberdef kind="variable" id="namespacededup__prepare__and__extract__all_1a7ef0a8be0b6025496d8c6c17c27ffa54" prot="protected" static="no" mutable="no">
        <type>dict</type>
        <definition>dict dedup_prepare_and_extract_all._DTYPE_SIZES</definition>
        <argsstring></argsstring>
        <name>_DTYPE_SIZES</name>
        <qualifiedname>dedup_prepare_and_extract_all._DTYPE_SIZES</qualifiedname>
        <initializer>=  {
    &quot;torch.uint8&quot;: 1,
    &quot;torch.int8&quot;: 1,
    &quot;torch.int16&quot;: 2,
    &quot;torch.int32&quot;: 4,
    &quot;torch.int64&quot;: 8,
    &quot;torch.float16&quot;: 2,
    &quot;torch.bfloat16&quot;: 2,
    &quot;torch.float32&quot;: 4,
    &quot;torch.float64&quot;: 8,
    &quot;U8&quot;: 1,
    &quot;I8&quot;: 1,
    &quot;I16&quot;: 2,
    &quot;I32&quot;: 4,
    &quot;I64&quot;: 8,
    &quot;F16&quot;: 2,
    &quot;BF16&quot;: 2,
    &quot;F32&quot;: 4,
    &quot;F64&quot;: 8,
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="26" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="26" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1a75e66061d3a65f6e4777698ac5cb20a7" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition> int dedup_prepare_and_extract_all._dtype_size</definition>
        <argsstring>(str dtype)</argsstring>
        <name>_dtype_size</name>
        <qualifiedname>dedup_prepare_and_extract_all._dtype_size</qualifiedname>
        <param>
          <type>str</type>
          <declname>dtype</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="48" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="48" bodyend="53"/>
        <referencedby refid="namespacededup__prepare__and__extract__all_1a0483b84b3e426f5e4d969801279b2cf0" compoundref="dedup__prepare__and__extract__all_8py" startline="54" endline="122">_as_list_tensors</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1a0483b84b3e426f5e4d969801279b2cf0" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Tuple[str, List[Dict[str, Any]]]</type>
        <definition> Tuple[str, List[Dict[str, Any]]] dedup_prepare_and_extract_all._as_list_tensors</definition>
        <argsstring>(Dict[str, Any] ie)</argsstring>
        <name>_as_list_tensors</name>
        <qualifiedname>dedup_prepare_and_extract_all._as_list_tensors</qualifiedname>
        <param>
          <type>Dict</type>
          <declname>ie</declname>
          <array>[str, Any]</array>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Return (weights_bin_rel, tensors_list) where each tensor has:
  name, dtype, shape, offset, nbytes
</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="54" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="54" bodyend="122"/>
        <references refid="namespacededup__prepare__and__extract__all_1a75e66061d3a65f6e4777698ac5cb20a7" compoundref="dedup__prepare__and__extract__all_8py" startline="48" endline="53">_dtype_size</references>
        <referencedby refid="namespacededup__prepare__and__extract__all_1a06789ce5a72299437e115b723205b8e5" compoundref="dedup__prepare__and__extract__all_8py" startline="189" endline="280">_prepare_groups_and_tensor_map</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1a8775f6b101d32d056aebff3d069f65a4" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Any</type>
        <definition> Any dedup_prepare_and_extract_all._load_json</definition>
        <argsstring>(str path)</argsstring>
        <name>_load_json</name>
        <qualifiedname>dedup_prepare_and_extract_all._load_json</qualifiedname>
        <param>
          <type>str</type>
          <declname>path</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="123" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="123" bodyend="127"/>
        <referencedby refid="namespacededup__prepare__and__extract__all_1a06789ce5a72299437e115b723205b8e5" compoundref="dedup__prepare__and__extract__all_8py" startline="189" endline="280">_prepare_groups_and_tensor_map</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1a45246e5fd8e820172df1bd4e9253a791" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>None</type>
        <definition> None dedup_prepare_and_extract_all._save_json</definition>
        <argsstring>(str path, Any obj)</argsstring>
        <name>_save_json</name>
        <qualifiedname>dedup_prepare_and_extract_all._save_json</qualifiedname>
        <param>
          <type>str</type>
          <declname>path</declname>
        </param>
        <param>
          <type>Any</type>
          <declname>obj</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="128" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="128" bodyend="135"/>
        <referencedby refid="namespacededup__prepare__and__extract__all_1a06789ce5a72299437e115b723205b8e5" compoundref="dedup__prepare__and__extract__all_8py" startline="189" endline="280">_prepare_groups_and_tensor_map</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1a2fae51d7cc3110f0004551ac26d2f050" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Dict[str, int]</type>
        <definition> Dict[str, int] dedup_prepare_and_extract_all._build_name_to_index</definition>
        <argsstring>(List[Dict[str, Any]] tensors)</argsstring>
        <name>_build_name_to_index</name>
        <qualifiedname>dedup_prepare_and_extract_all._build_name_to_index</qualifiedname>
        <param>
          <type>List]</type>
          <declname>tensors</declname>
          <array>[Dict[str, Any]</array>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="136" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="136" bodyend="142"/>
        <referencedby refid="namespacededup__prepare__and__extract__all_1a06789ce5a72299437e115b723205b8e5" compoundref="dedup__prepare__and__extract__all_8py" startline="189" endline="280">_prepare_groups_and_tensor_map</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1aff86add16d357753dee28bda484019c6" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>List[Dict[str, Any]]</type>
        <definition> List[Dict[str, Any]] dedup_prepare_and_extract_all._make_virtual_slices</definition>
        <argsstring>(Dict[str, Any] base, int slice_count)</argsstring>
        <name>_make_virtual_slices</name>
        <qualifiedname>dedup_prepare_and_extract_all._make_virtual_slices</qualifiedname>
        <param>
          <type>Dict</type>
          <declname>base</declname>
          <array>[str, Any]</array>
        </param>
        <param>
          <type>int</type>
          <declname>slice_count</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Create virtual tensors representing slicing along dimension 0 of a fused tensor.

Slice size is derived from nbytes/slice_count (byte-accurate).
Slice shape is base.shape[1:].
</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="143" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="143" bodyend="183"/>
        <referencedby refid="namespacededup__prepare__and__extract__all_1a06789ce5a72299437e115b723205b8e5" compoundref="dedup__prepare__and__extract__all_8py" startline="189" endline="280">_prepare_groups_and_tensor_map</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1a06789ce5a72299437e115b723205b8e5" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>None</type>
        <definition> None dedup_prepare_and_extract_all._prepare_groups_and_tensor_map</definition>
        <argsstring>(str ie_json_path, str manifest_path, str out_tensor_map_path, str out_groups_path)</argsstring>
        <name>_prepare_groups_and_tensor_map</name>
        <qualifiedname>dedup_prepare_and_extract_all._prepare_groups_and_tensor_map</qualifiedname>
        <param>
          <type>str</type>
          <declname>ie_json_path</declname>
        </param>
        <param>
          <type>str</type>
          <declname>manifest_path</declname>
        </param>
        <param>
          <type>str</type>
          <declname>out_tensor_map_path</declname>
        </param>
        <param>
          <type>str</type>
          <declname>out_groups_path</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="184" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="189" bodyend="280"/>
        <references refid="namespacededup__prepare__and__extract__all_1a0483b84b3e426f5e4d969801279b2cf0" compoundref="dedup__prepare__and__extract__all_8py" startline="54" endline="122">_as_list_tensors</references>
        <references refid="namespacededup__prepare__and__extract__all_1a2fae51d7cc3110f0004551ac26d2f050" compoundref="dedup__prepare__and__extract__all_8py" startline="136" endline="142">_build_name_to_index</references>
        <references refid="namespacededup__prepare__and__extract__all_1a8775f6b101d32d056aebff3d069f65a4" compoundref="dedup__prepare__and__extract__all_8py" startline="123" endline="127">_load_json</references>
        <references refid="namespacededup__prepare__and__extract__all_1aff86add16d357753dee28bda484019c6" compoundref="dedup__prepare__and__extract__all_8py" startline="143" endline="183">_make_virtual_slices</references>
        <references refid="namespacededup__prepare__and__extract__all_1a45246e5fd8e820172df1bd4e9253a791" compoundref="dedup__prepare__and__extract__all_8py" startline="128" endline="135">_save_json</references>
        <referencedby refid="namespacededup__prepare__and__extract__all_1af483d81f771e2aefe15bf2b91c56cb9c" compoundref="dedup__prepare__and__extract__all_8py" startline="281" endline="296">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__prepare__and__extract__all_1af483d81f771e2aefe15bf2b91c56cb9c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>None</type>
        <definition> None dedup_prepare_and_extract_all.main</definition>
        <argsstring>()</argsstring>
        <name>main</name>
        <qualifiedname>dedup_prepare_and_extract_all.main</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_prepare_and_extract_all.py" line="281" column="1" bodyfile="tools/dedup_prepare_and_extract_all.py" bodystart="281" bodyend="296"/>
        <references refid="namespacededup__prepare__and__extract__all_1a06789ce5a72299437e115b723205b8e5" compoundref="dedup__prepare__and__extract__all_8py" startline="189" endline="280">_prepare_groups_and_tensor_map</references>
        <references refid="namespacededup__prepare__and__extract__all_1af483d81f771e2aefe15bf2b91c56cb9c" compoundref="dedup__prepare__and__extract__all_8py" startline="281" endline="296">main</references>
        <referencedby refid="namespacededup__prepare__and__extract__all_1af483d81f771e2aefe15bf2b91c56cb9c" compoundref="dedup__prepare__and__extract__all_8py" startline="281" endline="296">main</referencedby>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><verbatim>Prepare inputs for the lossless byte-level dedup extractor.

This script converts:
  - an IE weight manifest (model.ie*.json) into tensor_map.for_dedup.json
  - a dedup pairing manifest (manifest.dedup.json) into groups.for_dedup.json

It is intentionally tolerant of multiple IE JSON layouts:
  - weights_bin vs bin
  - tensors as a list vs a dict keyed by tensor name
  - dtype spelled as torch.* or short forms (BF16/F16/F32/U8/I32)

Outputs match tools/dedup_extract_int4.py:
  groups: [{&quot;default_index&quot;: int, &quot;targets&quot;: [int, ...]}, ...]
  tensor_map: {&quot;weights_bin&quot;: &quot;file.bin&quot;, &quot;tensors&quot;: [{&quot;index&quot;: i, &quot;name&quot;: ..., &quot;offset&quot;: ..., &quot;nbytes&quot;: ...}, ...]}
</verbatim> </para>
    </detaileddescription>
    <location file="tools/dedup_prepare_and_extract_all.py" line="1" column="1"/>
  </compounddef>
</doxygen>
