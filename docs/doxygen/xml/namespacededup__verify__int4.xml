<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="namespacededup__verify__int4" kind="namespace" language="Python">
    <compoundname>dedup_verify_int4</compoundname>
    <innerclass refid="classdedup__verify__int4_1_1TensorRec" prot="public">dedup_verify_int4::TensorRec</innerclass>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespacededup__verify__int4_1a50ebc96274885e224b879ee106b7bf7f" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>object</type>
        <definition> object dedup_verify_int4._load_json</definition>
        <argsstring>(str path)</argsstring>
        <name>_load_json</name>
        <qualifiedname>dedup_verify_int4._load_json</qualifiedname>
        <param>
          <type>str</type>
          <declname>path</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Load and parse a JSON file.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="44" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="44" bodyend="49"/>
        <referencedby refid="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" compoundref="dedup__verify__int4_8py" startline="132" endline="213">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__verify__int4_1a4a5fda1cc948165c07aee1d0b8e41694" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bytes</type>
        <definition> bytes dedup_verify_int4._read_all</definition>
        <argsstring>(str path)</argsstring>
        <name>_read_all</name>
        <qualifiedname>dedup_verify_int4._read_all</qualifiedname>
        <param>
          <type>str</type>
          <declname>path</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Read entire binary file into memory.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="50" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="50" bodyend="55"/>
        <referencedby refid="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" compoundref="dedup__verify__int4_8py" startline="132" endline="213">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__verify__int4_1af42a1322c476e0f9bee3f4e73efad478" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bytes</type>
        <definition> bytes dedup_verify_int4._read_slice</definition>
        <argsstring>(str path, int offset, int nbytes)</argsstring>
        <name>_read_slice</name>
        <qualifiedname>dedup_verify_int4._read_slice</qualifiedname>
        <param>
          <type>str</type>
          <declname>path</declname>
        </param>
        <param>
          <type>int</type>
          <declname>offset</declname>
        </param>
        <param>
          <type>int</type>
          <declname>nbytes</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Read a slice from a file at a given offset.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="56" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="56" bodyend="65"/>
        <referencedby refid="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" compoundref="dedup__verify__int4_8py" startline="132" endline="213">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__verify__int4_1a9afff5005d6f44db475458f3b5cb4a4d" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition> int dedup_verify_int4._ceil_div</definition>
        <argsstring>(int a, int b)</argsstring>
        <name>_ceil_div</name>
        <qualifiedname>dedup_verify_int4._ceil_div</qualifiedname>
        <param>
          <type>int</type>
          <declname>a</declname>
        </param>
        <param>
          <type>int</type>
          <declname>b</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Compute ceil(a/b) for non-negative integers.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="66" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="66" bodyend="70"/>
        <referencedby refid="namespacededup__verify__int4_1a788d976f08691140744343eb98f7a064" compoundref="dedup__verify__int4_8py" startline="71" endline="75">_mask_nbytes</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__verify__int4_1a788d976f08691140744343eb98f7a064" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition> int dedup_verify_int4._mask_nbytes</definition>
        <argsstring>(int nbytes)</argsstring>
        <name>_mask_nbytes</name>
        <qualifiedname>dedup_verify_int4._mask_nbytes</qualifiedname>
        <param>
          <type>int</type>
          <declname>nbytes</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Return the number of mask bytes needed for a tensor of size nbytes.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="71" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="71" bodyend="75"/>
        <references refid="namespacededup__verify__int4_1a9afff5005d6f44db475458f3b5cb4a4d" compoundref="dedup__verify__int4_8py" startline="66" endline="70">_ceil_div</references>
        <referencedby refid="namespacededup__verify__int4_1adffd5bd389c51893ada348285b406135" compoundref="dedup__verify__int4_8py" startline="97" endline="131">_reconstruct</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__verify__int4_1a269856b1624aef4d1351b79182380938" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Tuple[str, Dict[int, <ref refid="classdedup__verify__int4_1_1TensorRec" kindref="compound">TensorRec</ref>]]</type>
        <definition> Tuple[str, Dict[int, TensorRec]] dedup_verify_int4._parse_tensor_map</definition>
        <argsstring>(object tensor_map)</argsstring>
        <name>_parse_tensor_map</name>
        <qualifiedname>dedup_verify_int4._parse_tensor_map</qualifiedname>
        <param>
          <type>object</type>
          <declname>tensor_map</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Parse the tensor map JSON object into a lookup table.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="76" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="76" bodyend="96"/>
        <referencedby refid="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" compoundref="dedup__verify__int4_8py" startline="132" endline="213">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__verify__int4_1adffd5bd389c51893ada348285b406135" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bytes</type>
        <definition> bytes dedup_verify_int4._reconstruct</definition>
        <argsstring>(bytes default_bytes, bytes mask, bytes exc)</argsstring>
        <name>_reconstruct</name>
        <qualifiedname>dedup_verify_int4._reconstruct</qualifiedname>
        <param>
          <type>bytes</type>
          <declname>default_bytes</declname>
        </param>
        <param>
          <type>bytes</type>
          <declname>mask</declname>
        </param>
        <param>
          <type>bytes</type>
          <declname>exc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Reconstruct a target blob from (default_bytes, mask, exc).

Mask semantics:
  - 1 bit per byte in default_bytes
  - if bit is 1 at byte index i, output byte at i comes from exc stream (in ascending i order)
</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="97" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="97" bodyend="131"/>
        <references refid="namespacededup__verify__int4_1a788d976f08691140744343eb98f7a064" compoundref="dedup__verify__int4_8py" startline="71" endline="75">_mask_nbytes</references>
        <referencedby refid="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" compoundref="dedup__verify__int4_8py" startline="132" endline="213">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition> int dedup_verify_int4.main</definition>
        <argsstring>()</argsstring>
        <name>main</name>
        <qualifiedname>dedup_verify_int4.main</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim>Program entry point.</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="tools/dedup_verify_int4.py" line="132" column="1" bodyfile="tools/dedup_verify_int4.py" bodystart="132" bodyend="213"/>
        <references refid="namespacededup__verify__int4_1a50ebc96274885e224b879ee106b7bf7f" compoundref="dedup__verify__int4_8py" startline="44" endline="49">_load_json</references>
        <references refid="namespacededup__verify__int4_1a269856b1624aef4d1351b79182380938" compoundref="dedup__verify__int4_8py" startline="76" endline="96">_parse_tensor_map</references>
        <references refid="namespacededup__verify__int4_1a4a5fda1cc948165c07aee1d0b8e41694" compoundref="dedup__verify__int4_8py" startline="50" endline="55">_read_all</references>
        <references refid="namespacededup__verify__int4_1af42a1322c476e0f9bee3f4e73efad478" compoundref="dedup__verify__int4_8py" startline="56" endline="65">_read_slice</references>
        <references refid="namespacededup__verify__int4_1adffd5bd389c51893ada348285b406135" compoundref="dedup__verify__int4_8py" startline="97" endline="131">_reconstruct</references>
        <references refid="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" compoundref="dedup__verify__int4_8py" startline="132" endline="213">main</references>
        <referencedby refid="namespacededup__verify__int4_1a0d8b8a07124bb237925517046ff60605" compoundref="dedup__verify__int4_8py" startline="132" endline="213">main</referencedby>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><verbatim>dedup_verify_int4.py

Lossless verifier for byte-oriented dedup artifacts.

This tool:
  - Loads model.dedup.json
  - Reads defaults/masks/exceptions binaries
  - Reconstructs each target tensor
  - Reads the original target tensor bytes from weights_bin using tensor map
  - Byte-compares reconstructed vs original

Inputs:
  - --model-dir: model directory containing weights_bin
  - --tensor-map: JSON mapping tensor indices -&gt; (offset,nbytes)
  - --spec: dedup spec JSON (model.dedup.json)
  - --out-prefix: prefix used by extractor (to locate bin files if spec uses basenames)

Usage:
  python3 tools/dedup_verify_int4.py \
    --model-dir models/gpt-oss-20b \
    --tensor-map models/gpt-oss-20b/model.tensor_map.json \
    --spec models/gpt-oss-20b/model.dedup.json
</verbatim> </para>
    </detaileddescription>
    <location file="tools/dedup_verify_int4.py" line="1" column="1"/>
  </compounddef>
</doxygen>
